{
  "version": 3,
  "sources": ["../bundle-yx5MLA/checked-fetch.js", "../../../src/index.js", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../bundle-yx5MLA/middleware-insertion-facade.js", "../../../node_modules/wrangler/templates/middleware/common.ts", "../bundle-yx5MLA/middleware-loader.entry.ts"],
  "sourceRoot": "/home/runner/workspace/.wrangler/tmp/dev-oFRboB",
  "sourcesContent": ["const urls = new Set();\n\nfunction checkURL(request, init) {\n\tconst url =\n\t\trequest instanceof URL\n\t\t\t? request\n\t\t\t: new URL(\n\t\t\t\t\t(typeof request === \"string\"\n\t\t\t\t\t\t? new Request(request, init)\n\t\t\t\t\t\t: request\n\t\t\t\t\t).url\n\t\t\t\t);\n\tif (url.port && url.port !== \"443\" && url.protocol === \"https:\") {\n\t\tif (!urls.has(url.toString())) {\n\t\t\turls.add(url.toString());\n\t\t\tconsole.warn(\n\t\t\t\t`WARNING: known issue with \\`fetch()\\` requests to custom HTTPS ports in published Workers:\\n` +\n\t\t\t\t\t` - ${url.toString()} - the custom port will be ignored when the Worker is published using the \\`wrangler deploy\\` command.\\n`\n\t\t\t);\n\t\t}\n\t}\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\tconst [request, init] = argArray;\n\t\tcheckURL(request, init);\n\t\treturn Reflect.apply(target, thisArg, argArray);\n\t},\n});\n", "export default {\n  async fetch(request, env) {\n    const url = new URL(request.url);\n    const path = url.pathname;\n\n    const corsHeaders = {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Cookie',\n      'Access-Control-Allow-Credentials': 'true',\n    };\n\n    if (request.method === 'OPTIONS') {\n      return new Response(null, { headers: corsHeaders });\n    }\n\n    if (path.startsWith('/api/')) {\n      return handleAPI(request, env, path, corsHeaders);\n    }\n\n    return serveStatic(path, corsHeaders, env);\n  },\n};\n\nasync function handleAPI(request, env, path, corsHeaders) {\n  // Get questions with pagination\n  if (path.match(/^\\/api\\/questions(\\?.*)?$/) && request.method === 'GET') {\n    const url = new URL(request.url);\n    const pageParam = url.searchParams.get('page') || '1';\n    const page = Math.max(1, parseInt(pageParam) || 1); // Validate: minimum 1\n    return handleGetQuestions(env, page, corsHeaders);\n  }\n\n  // Create a new question (no category needed)\n  if (path === '/api/questions' && request.method === 'POST') {\n    return handleCreateQuestion(request, env, corsHeaders);\n  }\n\n  if (path.match(/^\\/api\\/q\\/\\d+$/) && request.method === 'GET') {\n    const questionId = path.split('/').pop();\n    return handleGetQuestion(env, questionId, corsHeaders);\n  }\n\n  if (path.match(/^\\/api\\/q\\/\\d+\\/answer$/) && request.method === 'POST') {\n    const questionId = path.split('/')[3];\n    return handleCreateAnswer(request, env, questionId, corsHeaders);\n  }\n\n  if (path.match(/^\\/api\\/u\\/[a-z0-9]+$/) && request.method === 'GET') {\n    const username = path.split('/').pop();\n    return handleGetUserProfile(env, username, corsHeaders);\n  }\n\n  if (path === '/api/auth/register' && request.method === 'POST') {\n    return handleRegister(request, env, corsHeaders);\n  }\n\n  if (path === '/api/auth/login' && request.method === 'POST') {\n    return handleLogin(request, env, corsHeaders);\n  }\n\n  if (path === '/api/auth/logout' && request.method === 'POST') {\n    return handleLogout(request, env, corsHeaders);\n  }\n\n  if (path === '/api/auth/me' && request.method === 'GET') {\n    return handleGetUser(request, env, corsHeaders);\n  }\n\n  if (path === '/api/auth/change-password' && request.method === 'POST') {\n    return handleChangePassword(request, env, corsHeaders);\n  }\n\n  // Public settings endpoint\n  if (path === '/api/settings' && request.method === 'GET') {\n    return handleGetSettings(env, corsHeaders);\n  }\n\n  if (path === '/api/translations' && request.method === 'GET') {\n    return handleGetTranslations(env, corsHeaders);\n  }\n\n  // Admin API endpoints\n  if (path === '/api/admin/settings' && request.method === 'GET') {\n    return handleAdminGetSettings(request, env, corsHeaders);\n  }\n\n  if (path === '/api/admin/settings' && request.method === 'PUT') {\n    return handleAdminUpdateSettings(request, env, corsHeaders);\n  }\n\n  if (path === '/api/admin/users' && request.method === 'GET') {\n    return handleAdminGetUsers(request, env, corsHeaders);\n  }\n\n  if (path.match(/^\\/api\\/admin\\/users\\/[^/]+\\/role$/) && request.method === 'PUT') {\n    const userId = path.split('/')[4];\n    return handleAdminUpdateUserRole(request, env, userId, corsHeaders);\n  }\n\n  if (path.match(/^\\/api\\/admin\\/users\\/[^/]+\\/ban$/) && request.method === 'PUT') {\n    const userId = path.split('/')[4];\n    return handleAdminToggleBan(request, env, userId, corsHeaders);\n  }\n\n  if (path === '/api/admin/content/questions' && request.method === 'GET') {\n    return handleAdminGetQuestions(request, env, corsHeaders);\n  }\n\n  if (path === '/api/admin/content/answers' && request.method === 'GET') {\n    return handleAdminGetAnswers(request, env, corsHeaders);\n  }\n\n  if (path.match(/^\\/api\\/admin\\/questions\\/\\d+$/) && request.method === 'PUT') {\n    const questionId = path.split('/').pop();\n    return handleAdminUpdateQuestion(request, env, questionId, corsHeaders);\n  }\n\n  if (path.match(/^\\/api\\/admin\\/questions\\/\\d+$/) && request.method === 'DELETE') {\n    const questionId = path.split('/').pop();\n    return handleAdminDeleteQuestion(request, env, questionId, corsHeaders);\n  }\n\n  if (path.match(/^\\/api\\/admin\\/answers\\/\\d+$/) && request.method === 'PUT') {\n    const answerId = path.split('/').pop();\n    return handleAdminUpdateAnswer(request, env, answerId, corsHeaders);\n  }\n\n  if (path.match(/^\\/api\\/admin\\/answers\\/\\d+$/) && request.method === 'DELETE') {\n    const answerId = path.split('/').pop();\n    return handleAdminDeleteAnswer(request, env, answerId, corsHeaders);\n  }\n\n  // Voting endpoints\n  if (path.match(/^\\/api\\/questions\\/\\d+\\/vote$/) && request.method === 'POST') {\n    const questionId = path.split('/')[3];\n    return handleVote(request, env, 'question', questionId, corsHeaders);\n  }\n\n  if (path.match(/^\\/api\\/answers\\/\\d+\\/vote$/) && request.method === 'POST') {\n    const answerId = path.split('/')[3];\n    return handleVote(request, env, 'answer', answerId, corsHeaders);\n  }\n\n  return new Response(JSON.stringify({ error: 'Not found' }), {\n    status: 404,\n    headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n  });\n}\n\nfunction validateUsername(username) {\n  if (!username) return 'Username is required';\n  if (username.length > 12) return 'Username must be 12 characters or less';\n  if (!/^[a-z0-9]+$/.test(username)) return 'Username must be lowercase letters and numbers only';\n  return null;\n}\n\nasync function handleRegister(request, env, corsHeaders) {\n  try {\n    const { email, password, username } = await request.json();\n\n    if (!email || !password || !username) {\n      return new Response(JSON.stringify({ error: 'Email, password, and username required' }), {\n        status: 400,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const usernameError = validateUsername(username);\n    if (usernameError) {\n      return new Response(JSON.stringify({ error: usernameError }), {\n        status: 400,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const existingEmail = await env.DB.prepare('SELECT id FROM users WHERE email = ?').bind(email).first();\n    if (existingEmail) {\n      return new Response(JSON.stringify({ error: 'Email already registered' }), {\n        status: 400,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const existingUsername = await env.DB.prepare('SELECT id FROM users WHERE username = ?').bind(username).first();\n    if (existingUsername) {\n      return new Response(JSON.stringify({ error: 'Username already taken' }), {\n        status: 400,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const passwordHash = await hashPassword(password);\n\n    const insertResult = await env.DB.prepare('INSERT INTO users (email, password_hash, username, role) VALUES (?, ?, ?, ?)').bind(\n      email,\n      passwordHash,\n      username,\n      'user'\n    ).run();\n\n    const userId = insertResult.meta.last_row_id;\n\n    const sessionId = crypto.randomUUID();\n    const expiresAt = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString();\n\n    await env.DB.prepare('INSERT INTO sessions (session_id, user_id, expires_at) VALUES (?, ?, ?)').bind(\n      sessionId,\n      userId,\n      expiresAt\n    ).run();\n\n    const headers = {\n      ...corsHeaders,\n      'Content-Type': 'application/json',\n      'Set-Cookie': `session=${sessionId}; Path=/; HttpOnly; Secure; SameSite=Strict; Max-Age=2592000`,\n    };\n\n    return new Response(JSON.stringify({ success: true, user: { id: userId, email, username, role: 'user' } }), {\n      headers,\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleLogin(request, env, corsHeaders) {\n  try {\n    const { email, password } = await request.json();\n\n    if (!email || !password) {\n      return new Response(JSON.stringify({ error: 'Email and password required' }), {\n        status: 400,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const user = await env.DB.prepare('SELECT id, email, username, password_hash, role FROM users WHERE email = ?').bind(email).first();\n\n    if (!user || !(await verifyPassword(password, user.password_hash))) {\n      return new Response(JSON.stringify({ error: 'Invalid credentials' }), {\n        status: 401,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const sessionId = crypto.randomUUID();\n    const expiresAt = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString();\n\n    await env.DB.prepare('INSERT INTO sessions (session_id, user_id, expires_at) VALUES (?, ?, ?)').bind(\n      sessionId,\n      user.id,\n      expiresAt\n    ).run();\n\n    const headers = {\n      ...corsHeaders,\n      'Content-Type': 'application/json',\n      'Set-Cookie': `session=${sessionId}; Path=/; HttpOnly; Secure; SameSite=Strict; Max-Age=2592000`,\n    };\n\n    return new Response(JSON.stringify({ success: true, user: { id: user.id, email: user.email, username: user.username, role: user.role } }), {\n      headers,\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleLogout(request, env, corsHeaders) {\n  try {\n    const sessionId = getSessionFromCookie(request.headers.get('Cookie'));\n    \n    if (sessionId) {\n      await env.DB.prepare('DELETE FROM sessions WHERE session_id = ?').bind(sessionId).run();\n    }\n    \n    const headers = {\n      ...corsHeaders,\n      'Content-Type': 'application/json',\n      'Set-Cookie': 'session=; Path=/; HttpOnly; Secure; SameSite=Strict; Max-Age=0',\n    };\n\n    return new Response(JSON.stringify({ success: true }), { headers });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleGetUser(request, env, corsHeaders) {\n  try {\n    const sessionId = getSessionFromCookie(request.headers.get('Cookie'));\n\n    if (!sessionId) {\n      return new Response(JSON.stringify({ user: null }), {\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const session = await env.DB.prepare(`\n      SELECT s.user_id, u.email, u.username, u.role \n      FROM sessions s \n      JOIN users u ON s.user_id = u.id \n      WHERE s.session_id = ? AND s.expires_at > datetime('now')\n    `).bind(sessionId).first();\n\n    if (!session) {\n      return new Response(JSON.stringify({ user: null }), {\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    return new Response(JSON.stringify({\n      user: {\n        id: session.user_id,\n        email: session.email,\n        username: session.username,\n        role: session.role\n      }\n    }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nfunction getSessionFromCookie(cookieHeader) {\n  if (!cookieHeader) return null;\n  const match = cookieHeader.match(/session=([^;]+)/);\n  return match ? match[1] : null;\n}\n\nasync function hashPassword(password) {\n  const encoder = new TextEncoder();\n  const salt = crypto.getRandomValues(new Uint8Array(16));\n  const passwordData = encoder.encode(password);\n  \n  const key = await crypto.subtle.importKey(\n    'raw',\n    passwordData,\n    'PBKDF2',\n    false,\n    ['deriveBits']\n  );\n  \n  const hashBuffer = await crypto.subtle.deriveBits(\n    {\n      name: 'PBKDF2',\n      salt: salt,\n      iterations: 100000,\n      hash: 'SHA-256'\n    },\n    key,\n    256\n  );\n  \n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n  const saltArray = Array.from(salt);\n  \n  const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n  const saltHex = saltArray.map(b => b.toString(16).padStart(2, '0')).join('');\n  \n  return saltHex + ':' + hashHex;\n}\n\nasync function verifyPassword(password, storedHash) {\n  const [saltHex, hashHex] = storedHash.split(':');\n  \n  if (!saltHex || !hashHex) {\n    return false;\n  }\n  \n  const salt = new Uint8Array(saltHex.match(/.{2}/g).map(byte => parseInt(byte, 16)));\n  const encoder = new TextEncoder();\n  const passwordData = encoder.encode(password);\n  \n  const key = await crypto.subtle.importKey(\n    'raw',\n    passwordData,\n    'PBKDF2',\n    false,\n    ['deriveBits']\n  );\n  \n  const hashBuffer = await crypto.subtle.deriveBits(\n    {\n      name: 'PBKDF2',\n      salt: salt,\n      iterations: 100000,\n      hash: 'SHA-256'\n    },\n    key,\n    256\n  );\n  \n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n  const computedHashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n  \n  return computedHashHex === hashHex;\n}\n\nasync function handleGetQuestions(env, page, corsHeaders) {\n  try {\n    const perPage = 6;\n    const offset = (page - 1) * perPage;\n\n    // Get total count\n    const { total } = await env.DB.prepare(`SELECT COUNT(*) as total FROM questions`).first();\n\n    // Get questions with pagination\n    const { results: questions } = await env.DB.prepare(`\n      SELECT q.id, q.title, q.content, q.created_at, q.votes, u.username,\n             (SELECT COUNT(*) FROM answers WHERE question_id = q.id) as answer_count\n      FROM questions q\n      LEFT JOIN users u ON q.user_id = u.id\n      ORDER BY q.created_at DESC\n      LIMIT ? OFFSET ?\n    `).bind(perPage, offset).all();\n\n    const totalPages = Math.ceil(total / perPage);\n\n    return new Response(JSON.stringify({ \n      questions,\n      page,\n      perPage,\n      total,\n      totalPages\n    }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleGetUserProfile(env, username, corsHeaders) {\n  try {\n    const user = await env.DB.prepare(`\n      SELECT id, username, email, role, created_at FROM users WHERE username = ?\n    `).bind(username).first();\n\n    if (!user) {\n      return new Response(JSON.stringify({ error: 'User not found' }), {\n        status: 404,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    return new Response(JSON.stringify({ \n      user: {\n        username: user.username,\n        role: user.role,\n        created_at: user.created_at\n      }\n    }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleGetQuestion(env, questionId, corsHeaders) {\n  try {\n    const question = await env.DB.prepare(`\n      SELECT q.id, q.title, q.content, q.created_at, q.votes, u.username\n      FROM questions q\n      LEFT JOIN users u ON q.user_id = u.id\n      WHERE q.id = ?\n    `).bind(questionId).first();\n\n    if (!question) {\n      return new Response(JSON.stringify({ error: 'Question not found' }), {\n        status: 404,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const { results: answers } = await env.DB.prepare(`\n      SELECT a.id, a.content, a.created_at, a.votes, u.username\n      FROM answers a\n      LEFT JOIN users u ON a.user_id = u.id\n      WHERE a.question_id = ? \n      ORDER BY a.created_at ASC\n    `).bind(questionId).all();\n\n    return new Response(JSON.stringify({ question, answers }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleCreateQuestion(request, env, corsHeaders) {\n  try {\n    const sessionId = getSessionFromCookie(request.headers.get('Cookie'));\n    if (!sessionId) {\n      return new Response(JSON.stringify({ error: 'Authentication required' }), {\n        status: 401,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const session = await env.DB.prepare(`\n      SELECT user_id FROM sessions WHERE session_id = ? AND expires_at > datetime('now')\n    `).bind(sessionId).first();\n\n    if (!session) {\n      return new Response(JSON.stringify({ error: 'Invalid session' }), {\n        status: 401,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const { title, content } = await request.json();\n\n    if (!title || !content) {\n      return new Response(JSON.stringify({ error: 'Title and content required' }), {\n        status: 400,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const result = await env.DB.prepare(`\n      INSERT INTO questions (title, content, user_id) VALUES (?, ?, ?)\n    `).bind(title, content, session.user_id).run();\n\n    const questionId = result.meta.last_row_id;\n\n    return new Response(JSON.stringify({ success: true, questionId }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleCreateAnswer(request, env, questionId, corsHeaders) {\n  try {\n    const sessionId = getSessionFromCookie(request.headers.get('Cookie'));\n    if (!sessionId) {\n      return new Response(JSON.stringify({ error: 'Authentication required' }), {\n        status: 401,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const session = await env.DB.prepare(`\n      SELECT user_id FROM sessions WHERE session_id = ? AND expires_at > datetime('now')\n    `).bind(sessionId).first();\n\n    if (!session) {\n      return new Response(JSON.stringify({ error: 'Invalid session' }), {\n        status: 401,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const { content } = await request.json();\n\n    if (!content) {\n      return new Response(JSON.stringify({ error: 'Content required' }), {\n        status: 400,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const question = await env.DB.prepare('SELECT id FROM questions WHERE id = ?').bind(questionId).first();\n    if (!question) {\n      return new Response(JSON.stringify({ error: 'Question not found' }), {\n        status: 404,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const result = await env.DB.prepare(`\n      INSERT INTO answers (question_id, content, user_id) VALUES (?, ?, ?)\n    `).bind(questionId, content, session.user_id).run();\n\n    const answerId = result.meta.last_row_id;\n\n    return new Response(JSON.stringify({ success: true, answerId }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleChangePassword(request, env, corsHeaders) {\n  try {\n    const sessionId = getSessionFromCookie(request.headers.get('Cookie'));\n    if (!sessionId) {\n      return new Response(JSON.stringify({ error: 'Authentication required' }), {\n        status: 401,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const session = await env.DB.prepare(`\n      SELECT s.user_id, u.password_hash \n      FROM sessions s \n      JOIN users u ON s.user_id = u.id \n      WHERE s.session_id = ? AND s.expires_at > datetime('now')\n    `).bind(sessionId).first();\n\n    if (!session) {\n      return new Response(JSON.stringify({ error: 'Invalid session' }), {\n        status: 401,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const { currentPassword, newPassword } = await request.json();\n\n    if (!currentPassword || !newPassword) {\n      return new Response(JSON.stringify({ error: 'Current and new password required' }), {\n        status: 400,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const isValid = await verifyPassword(currentPassword, session.password_hash);\n    if (!isValid) {\n      return new Response(JSON.stringify({ error: 'Current password is incorrect' }), {\n        status: 401,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const newPasswordHash = await hashPassword(newPassword);\n    await env.DB.prepare('UPDATE users SET password_hash = ? WHERE id = ?').bind(\n      newPasswordHash,\n      session.user_id\n    ).run();\n\n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\n// Admin helper function\nasync function checkAdminAccess(request, env) {\n  const sessionId = getSessionFromCookie(request.headers.get('Cookie'));\n  if (!sessionId) return null;\n\n  const session = await env.DB.prepare(`\n    SELECT s.user_id, u.role \n    FROM sessions s \n    JOIN users u ON s.user_id = u.id \n    WHERE s.session_id = ? AND s.expires_at > datetime('now')\n  `).bind(sessionId).first();\n\n  if (!session || session.role !== 'admin') return null;\n  return session;\n}\n\n// Admin API handlers\nasync function handleGetSettings(env, corsHeaders) {\n  try {\n    const { results: settings } = await env.DB.prepare('SELECT key, value FROM site_settings').all();\n    const settingsObj = {};\n    settings.forEach(s => { settingsObj[s.key] = s.value; });\n\n    return new Response(JSON.stringify(settingsObj), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleGetTranslations(env, corsHeaders) {\n  try {\n    const defaultLangResult = await env.DB.prepare('SELECT value FROM site_settings WHERE key = ?').bind('default_language').first();\n    const lang = defaultLangResult?.value || 'tr';\n\n    const { results: translations } = await env.DB.prepare('SELECT key, value FROM translations WHERE lang = ?').bind(lang).all();\n    const translationsObj = {};\n    translations.forEach(t => { translationsObj[t.key] = t.value; });\n\n    return new Response(JSON.stringify({ lang, translations: translationsObj }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleAdminGetSettings(request, env, corsHeaders) {\n  try {\n    const admin = await checkAdminAccess(request, env);\n    if (!admin) {\n      return new Response(JSON.stringify({ error: 'Admin access required' }), {\n        status: 403,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const { results: settings } = await env.DB.prepare('SELECT key, value FROM site_settings').all();\n    const settingsObj = {};\n    settings.forEach(s => { settingsObj[s.key] = s.value; });\n\n    return new Response(JSON.stringify(settingsObj), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleAdminUpdateSettings(request, env, corsHeaders) {\n  try {\n    const admin = await checkAdminAccess(request, env);\n    if (!admin) {\n      return new Response(JSON.stringify({ error: 'Admin access required' }), {\n        status: 403,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const { site_title, site_tagline, default_language } = await request.json();\n\n    // Use D1 batch for multiple writes (required for production)\n    const statements = [];\n    \n    if (site_title) {\n      statements.push(\n        env.DB.prepare('INSERT OR REPLACE INTO site_settings (key, value, updated_at) VALUES (?, ?, datetime(\"now\"))')\n          .bind('site_title', site_title)\n      );\n    }\n    if (site_tagline) {\n      statements.push(\n        env.DB.prepare('INSERT OR REPLACE INTO site_settings (key, value, updated_at) VALUES (?, ?, datetime(\"now\"))')\n          .bind('site_tagline', site_tagline)\n      );\n    }\n    if (default_language && (default_language === 'en' || default_language === 'tr')) {\n      statements.push(\n        env.DB.prepare('INSERT OR REPLACE INTO site_settings (key, value, updated_at) VALUES (?, ?, datetime(\"now\"))')\n          .bind('default_language', default_language)\n      );\n    }\n\n    // Execute all updates in a single batch operation\n    if (statements.length > 0) {\n      await env.DB.batch(statements);\n    }\n\n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleAdminGetUsers(request, env, corsHeaders) {\n  try {\n    const admin = await checkAdminAccess(request, env);\n    if (!admin) {\n      return new Response(JSON.stringify({ error: 'Admin access required' }), {\n        status: 403,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const { results: users } = await env.DB.prepare(`\n      SELECT id, email, username, role, created_at\n      FROM users\n      ORDER BY created_at DESC\n    `).all();\n\n    return new Response(JSON.stringify({ users }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleAdminUpdateUserRole(request, env, userId, corsHeaders) {\n  try {\n    const admin = await checkAdminAccess(request, env);\n    if (!admin) {\n      return new Response(JSON.stringify({ error: 'Admin access required' }), {\n        status: 403,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const { role } = await request.json();\n    if (!role || !['user', 'admin'].includes(role)) {\n      return new Response(JSON.stringify({ error: 'Invalid role' }), {\n        status: 400,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    await env.DB.prepare('UPDATE users SET role = ? WHERE id = ?').bind(role, userId).run();\n\n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleAdminToggleBan(request, env, userId, corsHeaders) {\n  try {\n    const admin = await checkAdminAccess(request, env);\n    if (!admin) {\n      return new Response(JSON.stringify({ error: 'Admin access required' }), {\n        status: 403,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const { banned } = await request.json();\n    await env.DB.prepare('UPDATE users SET banned = ? WHERE id = ?').bind(banned ? 1 : 0, userId).run();\n\n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleAdminGetQuestions(request, env, corsHeaders) {\n  try {\n    const admin = await checkAdminAccess(request, env);\n    if (!admin) {\n      return new Response(JSON.stringify({ error: 'Admin access required' }), {\n        status: 403,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const { results: questions } = await env.DB.prepare(`\n      SELECT q.id, q.title, q.content, q.created_at, q.votes, u.username\n      FROM questions q\n      LEFT JOIN users u ON q.user_id = u.id\n      ORDER BY q.created_at DESC\n      LIMIT 100\n    `).all();\n\n    return new Response(JSON.stringify({ questions }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleAdminGetAnswers(request, env, corsHeaders) {\n  try {\n    const admin = await checkAdminAccess(request, env);\n    if (!admin) {\n      return new Response(JSON.stringify({ error: 'Admin access required' }), {\n        status: 403,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const { results: answers } = await env.DB.prepare(`\n      SELECT a.id, a.content, a.created_at, a.votes, u.username, q.title as question_title\n      FROM answers a\n      LEFT JOIN users u ON a.user_id = u.id\n      JOIN questions q ON a.question_id = q.id\n      ORDER BY a.created_at DESC\n      LIMIT 100\n    `).all();\n\n    return new Response(JSON.stringify({ answers }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleAdminUpdateQuestion(request, env, questionId, corsHeaders) {\n  try {\n    const admin = await checkAdminAccess(request, env);\n    if (!admin) {\n      return new Response(JSON.stringify({ error: 'Admin access required' }), {\n        status: 403,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const { title, content } = await request.json();\n    if (!title || !content) {\n      return new Response(JSON.stringify({ error: 'Title and content required' }), {\n        status: 400,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    await env.DB.prepare('UPDATE questions SET title = ?, content = ? WHERE id = ?').bind(title, content, questionId).run();\n\n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleAdminDeleteQuestion(request, env, questionId, corsHeaders) {\n  try {\n    const admin = await checkAdminAccess(request, env);\n    if (!admin) {\n      return new Response(JSON.stringify({ error: 'Admin access required' }), {\n        status: 403,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    // Delete votes for all answers to this question first\n    await env.DB.prepare(`\n      DELETE FROM votes \n      WHERE item_type = 'answer' \n      AND item_id IN (SELECT id FROM answers WHERE question_id = ?)\n    `).bind(questionId).run();\n\n    // Delete votes for the question\n    await env.DB.prepare(`\n      DELETE FROM votes \n      WHERE item_type = 'question' AND item_id = ?\n    `).bind(questionId).run();\n\n    // Delete all answers for this question\n    await env.DB.prepare('DELETE FROM answers WHERE question_id = ?').bind(questionId).run();\n\n    // Finally delete the question\n    await env.DB.prepare('DELETE FROM questions WHERE id = ?').bind(questionId).run();\n\n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleAdminUpdateAnswer(request, env, answerId, corsHeaders) {\n  try {\n    const admin = await checkAdminAccess(request, env);\n    if (!admin) {\n      return new Response(JSON.stringify({ error: 'Admin access required' }), {\n        status: 403,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const { content } = await request.json();\n    if (!content) {\n      return new Response(JSON.stringify({ error: 'Content required' }), {\n        status: 400,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    await env.DB.prepare('UPDATE answers SET content = ? WHERE id = ?').bind(content, answerId).run();\n\n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleAdminDeleteAnswer(request, env, answerId, corsHeaders) {\n  try {\n    const admin = await checkAdminAccess(request, env);\n    if (!admin) {\n      return new Response(JSON.stringify({ error: 'Admin access required' }), {\n        status: 403,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    // Delete votes for this answer first\n    await env.DB.prepare(`\n      DELETE FROM votes \n      WHERE item_type = 'answer' AND item_id = ?\n    `).bind(answerId).run();\n\n    // Then delete the answer\n    await env.DB.prepare('DELETE FROM answers WHERE id = ?').bind(answerId).run();\n\n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleVote(request, env, itemType, itemId, corsHeaders) {\n  try {\n    const sessionId = getSessionFromCookie(request.headers.get('Cookie'));\n    if (!sessionId) {\n      return new Response(JSON.stringify({ error: 'Authentication required' }), {\n        status: 401,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const session = await env.DB.prepare(`\n      SELECT user_id FROM sessions WHERE session_id = ? AND expires_at > datetime('now')\n    `).bind(sessionId).first();\n\n    if (!session) {\n      return new Response(JSON.stringify({ error: 'Invalid or expired session' }), {\n        status: 401,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const userId = session.user_id;\n\n    const { vote } = await request.json();\n    if (vote !== 1 && vote !== -1 && vote !== 0) {\n      return new Response(JSON.stringify({ error: 'Vote must be 1 (upvote), -1 (downvote), or 0 (remove)' }), {\n        status: 400,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n      });\n    }\n\n    const tableName = itemType === 'question' ? 'questions' : 'answers';\n\n    // Check existing vote\n    const existingVote = await env.DB.prepare('SELECT vote FROM votes WHERE user_id = ? AND item_type = ? AND item_id = ?')\n      .bind(userId, itemType, itemId)\n      .first();\n\n    if (vote === 0) {\n      // Remove vote\n      if (existingVote) {\n        await env.DB.prepare('DELETE FROM votes WHERE user_id = ? AND item_type = ? AND item_id = ?')\n          .bind(userId, itemType, itemId)\n          .run();\n        await env.DB.prepare(`UPDATE ${tableName} SET votes = votes - ? WHERE id = ?`)\n          .bind(existingVote.vote, itemId)\n          .run();\n      }\n    } else if (existingVote) {\n      // Update existing vote\n      const voteDiff = vote - existingVote.vote;\n      await env.DB.prepare('UPDATE votes SET vote = ? WHERE user_id = ? AND item_type = ? AND item_id = ?')\n        .bind(vote, userId, itemType, itemId)\n        .run();\n      await env.DB.prepare(`UPDATE ${tableName} SET votes = votes + ? WHERE id = ?`)\n        .bind(voteDiff, itemId)\n        .run();\n    } else {\n      // Create new vote\n      await env.DB.prepare('INSERT INTO votes (user_id, item_type, item_id, vote) VALUES (?, ?, ?, ?)')\n        .bind(userId, itemType, itemId, vote)\n        .run();\n      await env.DB.prepare(`UPDATE ${tableName} SET votes = votes + ? WHERE id = ?`)\n        .bind(vote, itemId)\n        .run();\n    }\n\n    // Get updated votes count\n    const item = await env.DB.prepare(`SELECT votes FROM ${tableName} WHERE id = ?`).bind(itemId).first();\n\n    return new Response(JSON.stringify({ success: true, votes: item.votes }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n    });\n  }\n}\n\nasync function handleSitemap(env, corsHeaders) {\n  try {\n    const settingsResult = await env.DB.prepare('SELECT key, value FROM site_settings').all();\n    const settings = {};\n    settingsResult.results.forEach(row => {\n      settings[row.key] = row.value;\n    });\n    \n    const baseUrl = settings.site_url || 'https://mevzugida.com';\n    \n    const sitemap = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\n  <url>\n    <loc>${baseUrl}/</loc>\n    <changefreq>hourly</changefreq>\n    <priority>1.0</priority>\n  </url>\n  <url>\n    <loc>${baseUrl}/login</loc>\n    <changefreq>monthly</changefreq>\n    <priority>0.5</priority>\n  </url>\n  <url>\n    <loc>${baseUrl}/register</loc>\n    <changefreq>monthly</changefreq>\n    <priority>0.5</priority>\n  </url>\n  <url>\n    <loc>${baseUrl}/q-sitemap.xml</loc>\n    <changefreq>hourly</changefreq>\n    <priority>0.8</priority>\n  </url>\n</urlset>`;\n\n    return new Response(sitemap, {\n      headers: {\n        ...corsHeaders,\n        'Content-Type': 'application/xml; charset=utf-8',\n        'Cache-Control': 'public, max-age=3600'\n      }\n    });\n  } catch (error) {\n    return new Response('Error generating sitemap', { status: 500 });\n  }\n}\n\nasync function handleQuestionSitemap(env, corsHeaders) {\n  try {\n    const settingsResult = await env.DB.prepare('SELECT key, value FROM site_settings').all();\n    const settings = {};\n    settingsResult.results.forEach(row => {\n      settings[row.key] = row.value;\n    });\n    \n    const baseUrl = settings.site_url || 'https://mevzugida.com';\n    \n    const questionsResult = await env.DB.prepare(`\n      SELECT id, created_at\n      FROM questions\n      ORDER BY created_at DESC\n    `).all();\n\n    let urlEntries = '';\n    for (const question of questionsResult.results) {\n      const lastmod = new Date(question.created_at).toISOString().split('T')[0];\n      urlEntries += `\n  <url>\n    <loc>${baseUrl}/q/${question.id}</loc>\n    <lastmod>${lastmod}</lastmod>\n    <changefreq>daily</changefreq>\n    <priority>0.7</priority>\n  </url>`;\n    }\n\n    const sitemap = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">${urlEntries}\n</urlset>`;\n\n    return new Response(sitemap, {\n      headers: {\n        ...corsHeaders,\n        'Content-Type': 'application/xml; charset=utf-8',\n        'Cache-Control': 'public, max-age=3600'\n      }\n    });\n  } catch (error) {\n    return new Response('Error generating question sitemap', { status: 500 });\n  }\n}\n\nfunction handleRobotsTxt(env, corsHeaders) {\n  const robots = `User-agent: *\nAllow: /\n\nSitemap: https://mevzugida.com/sitemap.xml\nSitemap: https://mevzugida.com/q-sitemap.xml`;\n\n  return new Response(robots, {\n    headers: {\n      ...corsHeaders,\n      'Content-Type': 'text/plain; charset=utf-8',\n      'Cache-Control': 'public, max-age=86400'\n    }\n  });\n}\n\nasync function serveStatic(path, corsHeaders, env) {\n  // Server-Side Rendering for key pages\n  if (path === '/') {\n    return await renderHomePage(env, 1, corsHeaders);\n  }\n\n  // Pagination routes /p/1, /p/2, etc.\n  if (path.match(/^\\/p\\/\\d+$/)) {\n    const page = parseInt(path.split('/').pop());\n    return await renderHomePage(env, page, corsHeaders);\n  }\n\n  if (path.match(/^\\/q\\/\\d+$/)) {\n    const questionId = path.split('/').pop();\n    return await renderQuestionPage(env, questionId, corsHeaders);\n  }\n\n  // Static pages with real site settings\n  if (path === '/login' || path === '/register' || path === '/admin' || path === '/profile' || path.startsWith('/u/')) {\n    try {\n      const settingsResult = await env.DB.prepare('SELECT key, value FROM site_settings').all();\n      const settings = {};\n      settingsResult.results.forEach(row => {\n        settings[row.key] = row.value;\n      });\n      \n      const siteTitle = settings.site_title || 'Q&A Platform';\n      const siteTagline = settings.site_tagline || 'Ask questions, get answers';\n      const lang = settings.default_language || 'tr';\n      \n      return new Response(getBaseHTML(siteTitle, siteTagline, siteTitle, siteTagline, lang), {\n        headers: { ...corsHeaders, 'Content-Type': 'text/html' },\n      });\n    } catch (error) {\n      return new Response(getBaseHTML('Q&A Platform', 'Ask questions, get answers', 'Q&A Platform', 'Ask questions, get answers', 'tr'), {\n        headers: { ...corsHeaders, 'Content-Type': 'text/html' },\n      });\n    }\n  }\n\n  // Sitemap endpoints\n  if (path === '/sitemap.xml') {\n    return await handleSitemap(env, corsHeaders);\n  }\n\n  if (path === '/q-sitemap.xml') {\n    return await handleQuestionSitemap(env, corsHeaders);\n  }\n\n  // Robots.txt\n  if (path === '/robots.txt') {\n    return handleRobotsTxt(env, corsHeaders);\n  }\n\n  if (path === '/styles.css' || path.startsWith('/styles.css?')) {\n    return new Response(CSS, {\n      headers: { ...corsHeaders, 'Content-Type': 'text/css', 'Cache-Control': 'no-cache, no-store, must-revalidate' },\n    });\n  }\n\n  if (path === '/app.js' || path.startsWith('/app.js?')) {\n    return new Response(JS, {\n      headers: { ...corsHeaders, 'Content-Type': 'application/javascript', 'Cache-Control': 'no-cache, no-store, must-revalidate' },\n    });\n  }\n\n  return new Response('Not Found', { status: 404 });\n}\n\nasync function renderHomePage(env, page, corsHeaders) {\n  try {\n    const perPage = 6;\n    const offset = (page - 1) * perPage;\n\n    // Fetch site settings, questions, and translations\n    const [settingsResult, totalResult, questionsResult, translationsResult] = await Promise.all([\n      env.DB.prepare('SELECT key, value FROM site_settings').all(),\n      env.DB.prepare('SELECT COUNT(*) as total FROM questions').first(),\n      env.DB.prepare(`\n        SELECT q.id, q.title, q.content, q.created_at, q.votes, u.username,\n               (SELECT COUNT(*) FROM answers WHERE question_id = q.id) as answer_count\n        FROM questions q\n        LEFT JOIN users u ON q.user_id = u.id\n        ORDER BY q.created_at DESC\n        LIMIT ? OFFSET ?\n      `).bind(perPage, offset).all(),\n      env.DB.prepare('SELECT key, value, lang FROM translations').all()\n    ]);\n\n    const settings = {};\n    settingsResult.results.forEach(row => {\n      settings[row.key] = row.value;\n    });\n\n    const siteTitle = settings.site_title || 'Q&A Platform';\n    const siteTagline = settings.site_tagline || 'Ask questions, get answers';\n    const lang = settings.default_language || 'tr';\n    const questions = questionsResult.results || [];\n    const total = totalResult.total || 0;\n    const totalPages = Math.ceil(total / perPage);\n\n    // Build translations object for current language\n    const translations = {};\n    translationsResult.results.forEach(row => {\n      if (row.lang === lang) {\n        translations[row.key] = row.value;\n      }\n    });\n\n    const description = `${siteTitle} - ${siteTagline}. ${total} ${translations['home.total_questions'] || 'questions'}.`;\n    \n    // Render questions HTML\n    let questionsHTML = '';\n    if (questions.length === 0) {\n      questionsHTML = `<div class=\"no-questions\">${translations['home.no_questions'] || 'No questions yet. Be the first to ask!'}</div>`;\n    } else {\n      questions.forEach(q => {\n        const answerText = q.answer_count === 1 \n          ? (translations['misc.answer_singular'] || 'answer')\n          : (translations['misc.answer_plural'] || 'answers');\n        \n        questionsHTML += `\n          <div class=\"question-card\" data-question-id=\"${q.id}\">\n            <div class=\"question-card-inner\">\n              <div class=\"vote-section\">\n                <button class=\"vote-btn upvote\" data-id=\"${q.id}\" data-type=\"question\">\u25B2</button>\n                <span class=\"vote-count\" id=\"question-${q.id}-votes\">${q.votes || 0}</span>\n                <button class=\"vote-btn downvote\" data-id=\"${q.id}\" data-type=\"question\">\u25BC</button>\n              </div>\n              <div class=\"question-card-content\">\n                <h3 class=\"question-card-title\">${escapeHtml(q.title)}</h3>\n                <p class=\"question-card-excerpt\">${escapeHtml(q.content.substring(0, 200))}${q.content.length > 200 ? '...' : ''}</p>\n                <div class=\"question-card-meta\">\n                  <span>${q.answer_count} ${answerText}</span>\n                  ${q.username ? `<span>\u2022</span><span>${translations['misc.asked_by'] || 'asked by'} <a href=\"/u/${escapeHtml(q.username)}\">@${escapeHtml(q.username)}</a></span>` : ''}\n                  <span>\u2022</span>\n                  <span>${new Date(q.created_at).toLocaleDateString(lang === 'tr' ? 'tr-TR' : 'en-US')}</span>\n                </div>\n              </div>\n            </div>\n          </div>`;\n      });\n    }\n\n    // Pagination HTML\n    let paginationHTML = '';\n    if (totalPages > 1) {\n      paginationHTML = '<div class=\"pagination\">';\n      \n      if (page > 1) {\n        const prevPage = page === 2 ? '/' : `/p/${page - 1}`;\n        paginationHTML += `<a href=\"${prevPage}\" class=\"pagination-btn\">\u2190 ${translations['pagination.previous'] || 'Previous'}</a>`;\n      }\n      \n      for (let i = 1; i <= totalPages; i++) {\n        const pageUrl = i === 1 ? '/' : `/p/${i}`;\n        const isActive = i === page;\n        paginationHTML += `<a href=\"${pageUrl}\" class=\"pagination-btn ${isActive ? 'active' : ''}\">${i}</a>`;\n      }\n      \n      if (page < totalPages) {\n        paginationHTML += `<a href=\"/p/${page + 1}\" class=\"pagination-btn\">${translations['pagination.next'] || 'Next'} \u2192</a>`;\n      }\n      \n      paginationHTML += '</div>';\n    }\n\n    const bodyContent = `\n      <div class=\"questions-container\">\n        <div class=\"questions-header\">\n          <h2>${translations['home.all_questions'] || 'T\u00FCm Sorular'} (${total})</h2>\n          <button id=\"askQuestionBtn\" class=\"btn-primary\">\n            ${translations['button.ask_question'] || 'Soru Sor'}\n          </button>\n        </div>\n        <div class=\"questions-list\">\n          ${questionsHTML}\n        </div>\n        ${paginationHTML}\n      </div>`;\n    \n    const html = getBaseHTML(siteTitle, description, siteTitle, siteTagline, lang, bodyContent, translations);\n    \n    return new Response(html, {\n      headers: { ...corsHeaders, 'Content-Type': 'text/html; charset=utf-8' },\n    });\n  } catch (error) {\n    console.error('Error rendering home page:', error);\n    return new Response(getBaseHTML('Q&A Platform', 'Ask questions, get answers', 'Q&A Platform', 'Ask questions, get answers', 'tr'), {\n      headers: { ...corsHeaders, 'Content-Type': 'text/html' },\n    });\n  }\n}\n\nasync function renderQuestionPage(env, questionId, corsHeaders) {\n  try {\n    const [settingsResult, questionResult, answersResult, translationsResult] = await Promise.all([\n      env.DB.prepare('SELECT key, value FROM site_settings').all(),\n      env.DB.prepare(`\n        SELECT q.*, u.username, u.role\n        FROM questions q\n        LEFT JOIN users u ON q.user_id = u.id\n        WHERE q.id = ?\n      `).bind(questionId).first(),\n      env.DB.prepare(`\n        SELECT a.*, u.username, u.role\n        FROM answers a\n        LEFT JOIN users u ON a.user_id = u.id\n        WHERE a.question_id = ?\n        ORDER BY a.votes DESC, a.created_at ASC\n      `).bind(questionId).all(),\n      env.DB.prepare('SELECT key, value, lang FROM translations').all()\n    ]);\n\n    const settings = {};\n    settingsResult.results.forEach(row => {\n      settings[row.key] = row.value;\n    });\n\n    const siteTitle = settings.site_title || 'Q&A Platform';\n    const siteTagline = settings.site_tagline || 'Ask questions, get answers';\n    const lang = settings.default_language || 'tr';\n    const baseUrl = settings.site_url || 'https://mevzugida.com';\n    const question = questionResult;\n    const answers = answersResult.results || [];\n\n    // Build translations\n    const translations = {};\n    translationsResult.results.forEach(row => {\n      if (row.lang === lang) {\n        translations[row.key] = row.value;\n      }\n    });\n\n    if (!question) {\n      return new Response(getBaseHTML('Question not found', 'The question you are looking for does not exist.', siteTitle, siteTagline, lang), {\n        headers: { ...corsHeaders, 'Content-Type': 'text/html' },\n      });\n    }\n\n    const title = `${question.title} - ${siteTitle}`;\n    const description = question.content.substring(0, 155) + (question.content.length > 155 ? '...' : '');\n    \n    // Render answers HTML\n    let answersHTML = '';\n    if (answers.length === 0) {\n      answersHTML = `<div class=\"no-answers\">${translations['question.no_answers'] || 'No answers yet. Be the first to answer!'}</div>`;\n    } else {\n      answersHTML = '<div class=\"answers-list\">';\n      answers.forEach(a => {\n        answersHTML += `\n          <div class=\"answer-detail\" id=\"a-${a.id}\">\n            <div class=\"vote-section\">\n              <button class=\"vote-btn upvote\" data-id=\"${a.id}\" data-type=\"answer\">\u25B2</button>\n              <span class=\"vote-count\" id=\"a-${a.id}-votes\">${a.votes || 0}</span>\n              <button class=\"vote-btn downvote\" data-id=\"${a.id}\" data-type=\"answer\">\u25BC</button>\n            </div>\n            <div class=\"content-body\">\n              <div class=\"answer-content\">${formatTextWithParagraphs(a.content)}</div>\n              <div class=\"answer-meta\">\n                ${a.username ? `<a href=\"/u/${escapeHtml(a.username)}\">@${escapeHtml(a.username)}</a>` : '<span>' + (translations['misc.anonymous'] || 'Anonim') + '</span>'}\n                <span>\u2022</span>\n                <span>${new Date(a.created_at).toLocaleDateString(lang === 'tr' ? 'tr-TR' : 'en-US')}</span>\n              </div>\n            </div>\n          </div>`;\n      });\n      answersHTML += '</div>';\n    }\n\n    const bodyContent = `\n      <div class=\"breadcrumb\">\n        <a href=\"/\">${translations['breadcrumb.home'] || 'Home'}</a> &gt; \n        ${escapeHtml(question.title)}\n      </div>\n      <div class=\"question-detail\">\n        <div class=\"vote-section\">\n          <button class=\"vote-btn upvote\" data-id=\"${question.id}\" data-type=\"question\">\u25B2</button>\n          <span class=\"vote-count\" id=\"question-${question.id}-votes\">${question.votes || 0}</span>\n          <button class=\"vote-btn downvote\" data-id=\"${question.id}\" data-type=\"question\">\u25BC</button>\n        </div>\n        <div class=\"content-body\">\n          <h1>${escapeHtml(question.title)}</h1>\n          <div class=\"question-content\">${formatTextWithParagraphs(question.content)}</div>\n          <div class=\"answer-meta\">\n            ${question.username ? `<span>${translations['user.asked_by'] || ''} <a href=\"/u/${escapeHtml(question.username)}\">@${escapeHtml(question.username)}</a></span>` : '<span>' + (translations['misc.anonymous'] || 'Anonim') + '</span>'}\n            <span>\u2022</span>\n            <span>${new Date(question.created_at).toLocaleDateString(lang === 'tr' ? 'tr-TR' : 'en-US')}</span>\n          </div>\n        </div>\n      </div>\n      <div class=\"answers-section\">\n        <div class=\"answers-header\">\n          <h2>${translations['question.answers'] || 'Answers'} (${answers.length})</h2>\n          ${answers.length > 0 ? `\n            <span class=\"answer-meta-inline\">\n              ${answers[0].username ? `${translations['user.asked_by'] || ''} <a href=\"/u/${escapeHtml(answers[0].username)}\">@${escapeHtml(answers[0].username)}</a>` : translations['misc.anonymous'] || 'Anonim'}\n              <span>\u2022</span>\n              <span>${new Date(answers[0].created_at).toLocaleDateString(lang === 'tr' ? 'tr-TR' : 'en-US')}</span>\n            </span>\n          ` : ''}\n        </div>\n        ${answersHTML}\n      </div>\n      <div id=\"answerFormPlaceholder\"></div>`;\n    \n    // Generate QAPage structured data for SEO\n    const structuredData = generateQAPageStructuredData(question, answers, baseUrl);\n    \n    return new Response(getBaseHTML(title, description, siteTitle, siteTagline, lang, bodyContent, translations, structuredData), {\n      headers: { ...corsHeaders, 'Content-Type': 'text/html; charset=utf-8' },\n    });\n  } catch (error) {\n    return new Response(getBaseHTML('Q&A Platform', 'Ask questions, get answers', 'Q&A Platform', 'Ask questions, get answers', 'tr'), {\n      headers: { ...corsHeaders, 'Content-Type': 'text/html' },\n    });\n  }\n}\n\nfunction getBaseHTML(pageTitle, description, siteTitle, siteTagline, lang = 'tr', bodyContent = '', translations = {}, structuredData = null) {\n  const loginText = translations['nav.login'] || 'Login';\n  const signupText = translations['nav.signup'] || 'Sign Up';\n  \n  const structuredDataScript = structuredData ? `\n  <script type=\"application/ld+json\">\n${structuredData}\n  </script>` : '';\n  \n  return `<!DOCTYPE html>\n<html lang=\"${lang}\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>${escapeHtml(pageTitle)}</title>\n  <meta name=\"description\" content=\"${escapeHtml(description)}\">\n  \n  <!-- Open Graph / Facebook -->\n  <meta property=\"og:type\" content=\"website\">\n  <meta property=\"og:title\" content=\"${escapeHtml(pageTitle)}\">\n  <meta property=\"og:description\" content=\"${escapeHtml(description)}\">\n  \n  <!-- Twitter -->\n  <meta name=\"twitter:card\" content=\"summary_large_image\">\n  <meta name=\"twitter:title\" content=\"${escapeHtml(pageTitle)}\">\n  <meta name=\"twitter:description\" content=\"${escapeHtml(description)}\">\n  ${structuredDataScript}\n  <link rel=\"preload\" href=\"/styles.css?v=8\" as=\"style\">\n  <link rel=\"stylesheet\" href=\"/styles.css?v=8\">\n  <link rel=\"preload\" href=\"/app.js?v=8\" as=\"script\">\n</head>\n<body>\n  <div class=\"container\">\n    <header>\n      <div class=\"header-content\">\n        <div>\n          <a href=\"/\" class=\"header-link\">\n            <div class=\"site-title\" id=\"siteTitle\">${escapeHtml(siteTitle)}</div>\n          </a>\n          <p class=\"subtitle\" id=\"siteTagline\">${escapeHtml(siteTagline)}</p>\n        </div>\n        <button class=\"mobile-menu-btn\" id=\"mobileMenuBtn\" onclick=\"toggleMobileMenu()\">\n          <span></span>\n          <span></span>\n          <span></span>\n        </button>\n        <nav class=\"user-nav\" id=\"userNav\">\n          <a href=\"/login\" class=\"btn-secondary\">${escapeHtml(loginText)}</a>\n          <a href=\"/register\" class=\"btn-primary\">${escapeHtml(signupText)}</a>\n        </nav>\n      </div>\n    </header>\n    <div class=\"mobile-menu\" id=\"mobileMenu\">\n      <div class=\"mobile-menu-overlay\" onclick=\"toggleMobileMenu()\"></div>\n      <div class=\"mobile-menu-content\">\n        <button class=\"mobile-menu-close\" onclick=\"toggleMobileMenu()\">\u2715</button>\n        <nav class=\"mobile-nav\" id=\"mobileNav\">\n          <a href=\"/login\" class=\"btn-secondary\" onclick=\"toggleMobileMenu()\">${escapeHtml(loginText)}</a>\n          <a href=\"/register\" class=\"btn-primary\" onclick=\"toggleMobileMenu()\">${escapeHtml(signupText)}</a>\n        </nav>\n      </div>\n    </div>\n    <main id=\"app\">${bodyContent || '<div class=\"loading\">Loading...</div>'}</main>\n  </div>\n  <script>\n    function toggleMobileMenu() {\n      const menu = document.getElementById('mobileMenu');\n      menu.classList.toggle('active');\n    }\n  </script>\n  <script defer src=\"/app.js?v=8\"></script>\n</body>\n</html>`;\n}\n\nfunction escapeHtml(text) {\n  const map = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#039;'\n  };\n  return text.replace(/[&<>\"']/g, m => map[m]);\n}\n\nfunction formatTextWithParagraphs(text) {\n  if (!text) return '';\n  \n  const escaped = escapeHtml(text);\n  const paragraphs = escaped.split(/\\n\\n+/);\n  \n  const formatted = paragraphs\n    .map(p => p.trim())\n    .filter(p => p.length > 0)\n    .map(p => `<p style=\"margin-bottom: 12px;\">${p.replace(/\\n/g, '<br>')}</p>`)\n    .join('');\n  \n  return formatted || `<p>${escaped}</p>`;\n}\n\nfunction generateQAPageStructuredData(question, answers, baseUrl) {\n  // Clean text for JSON (remove HTML tags and escape quotes)\n  const cleanText = (text) => {\n    if (!text) return '';\n    return text\n      .replace(/<[^>]*>/g, '') // Remove HTML tags\n      .replace(/\"/g, '\\\\\"') // Escape quotes\n      .replace(/\\n/g, ' ') // Replace newlines with spaces\n      .replace(/\\s+/g, ' ') // Normalize whitespace\n      .trim();\n  };\n\n  // Convert database datetime to ISO 8601 with timezone\n  const toISO8601 = (dateStr) => {\n    if (!dateStr) return '';\n    // Database format: \"2025-11-09 00:20:50\"\n    // ISO 8601 format: \"2025-11-09T00:20:50Z\"\n    return dateStr.replace(' ', 'T') + 'Z';\n  };\n\n  const questionUrl = `${baseUrl}/q/${question.id}`;\n  \n  // Build author object for question\n  const questionAuthor = question.username ? {\n    \"@type\": \"Person\",\n    \"name\": question.username,\n    \"url\": `${baseUrl}/u/${question.username}`\n  } : {\n    \"@type\": \"Person\",\n    \"name\": \"Anonymous\"\n  };\n\n  // Sort answers by votes to find best answer\n  const sortedAnswers = [...answers].sort((a, b) => (b.votes || 0) - (a.votes || 0));\n  \n  // Build acceptedAnswer (highest voted answer if exists)\n  let acceptedAnswer = null;\n  let suggestedAnswers = [];\n  \n  if (sortedAnswers.length > 0) {\n    const bestAnswer = sortedAnswers[0];\n    acceptedAnswer = {\n      \"@type\": \"Answer\",\n      \"text\": cleanText(bestAnswer.content),\n      \"upvoteCount\": bestAnswer.votes || 0,\n      \"url\": `${questionUrl}#a-${bestAnswer.id}`,\n      \"datePublished\": toISO8601(bestAnswer.created_at),\n      \"author\": bestAnswer.username ? {\n        \"@type\": \"Person\",\n        \"name\": bestAnswer.username,\n        \"url\": `${baseUrl}/u/${bestAnswer.username}`\n      } : {\n        \"@type\": \"Person\",\n        \"name\": \"Anonymous\"\n      }\n    };\n    \n    // All other answers are suggested answers\n    suggestedAnswers = sortedAnswers.slice(1).map(answer => ({\n      \"@type\": \"Answer\",\n      \"text\": cleanText(answer.content),\n      \"upvoteCount\": answer.votes || 0,\n      \"url\": `${questionUrl}#a-${answer.id}`,\n      \"datePublished\": toISO8601(answer.created_at),\n      \"author\": answer.username ? {\n        \"@type\": \"Person\",\n        \"name\": answer.username,\n        \"url\": `${baseUrl}/u/${answer.username}`\n      } : {\n        \"@type\": \"Person\",\n        \"name\": \"Anonymous\"\n      }\n    }));\n  }\n\n  const structuredData = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"QAPage\",\n    \"mainEntity\": {\n      \"@type\": \"Question\",\n      \"name\": cleanText(question.title),\n      \"text\": cleanText(question.content),\n      \"answerCount\": answers.length,\n      \"upvoteCount\": question.votes || 0,\n      \"datePublished\": toISO8601(question.created_at),\n      \"author\": questionAuthor\n    }\n  };\n\n  // Add acceptedAnswer if exists\n  if (acceptedAnswer) {\n    structuredData.mainEntity.acceptedAnswer = acceptedAnswer;\n  }\n\n  // Add suggestedAnswer array if exists\n  if (suggestedAnswers.length > 0) {\n    structuredData.mainEntity.suggestedAnswer = suggestedAnswers;\n  }\n\n  return JSON.stringify(structuredData, null, 2);\n}\n\n// HTML now generated dynamically via getBaseHTML() for SSR\n\nconst CSS = `* { margin: 0; padding: 0; box-sizing: border-box; }\nbody { font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif; background: #e3f2fd; color: #24292f; font-size: 14px; line-height: 1.6; }\np, span, div, li, td, th, label { color: #24292f; }\nheader { background: #fff; border-bottom: 1px solid #d0d7de; padding: 16px 32px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); width: 100%; }\n.header-content { display: flex; justify-content: space-between; align-items: center; max-width: 1600px; margin: 0 auto; padding: 0 32px; }\n.header-link { text-decoration: none !important; color: inherit !important; }\nh1 { font-size: 24px; font-weight: 600; margin: 0; color: #0969da; }\n.site-title { font-size: 24px; font-weight: 600; margin: 0; color: #24292f; }\n.subtitle { color: #57606a; font-size: 14px; margin-top: 4px; }\n.user-nav { display: flex; gap: 12px; align-items: center; }\n.mobile-menu-btn { display: none; flex-direction: column; gap: 4px; background: none; border: none; cursor: pointer; padding: 8px; }\n.mobile-menu-btn span { display: block; width: 24px; height: 3px; background: #24292f; transition: all 0.3s; }\n.mobile-menu { position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 1000; pointer-events: none; }\n.mobile-menu.active { pointer-events: auto; }\n.mobile-menu-overlay { position: absolute; top: 0; right: 0; bottom: 0; left: 0; background: rgba(0, 0, 0, 0); transition: background 0.3s; }\n.mobile-menu.active .mobile-menu-overlay { background: rgba(0, 0, 0, 0.5); }\n.mobile-menu-content { position: absolute; top: 0; right: -300px; bottom: 0; width: 300px; max-width: 80vw; background: #fff; box-shadow: -2px 0 8px rgba(0,0,0,0.1); transition: right 0.3s; padding: 60px 24px 24px 24px; }\n.mobile-menu.active .mobile-menu-content { right: 0; }\n.mobile-menu-close { position: absolute; top: 16px; right: 16px; background: none; border: none; font-size: 32px; cursor: pointer; color: #24292f; padding: 8px; line-height: 1; }\n.mobile-nav { display: flex; flex-direction: column; gap: 16px; }\n.btn-primary, .btn-secondary, .btn-logout { padding: 8px 16px; border: 1px solid #d0d7de; background: #fff; color: #24292f; text-decoration: none; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s; }\n.btn-primary { background: #218838; border-color: #218838; color: #fff; }\n.btn-primary:hover { background: #1e7e34; }\n.btn-secondary { background: #fff; color: #24292f; border-color: #d0d7de; }\n.btn-secondary:hover { background: #f6f8fa; border-color: #0969da; }\n.btn-logout { background: transparent; border-color: #d1242f; color: #d1242f; }\n.btn-logout:hover { background: #d1242f; color: #fff; }\n.user-info { color: #24292f; font-size: 14px; font-weight: 500; }\n#app { background: #e3f2fd; padding: 24px 32px; min-height: 70vh; width: 70%; margin: 0 auto; }\n.breadcrumb { margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid #d0d7de; color: #57606a; font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }\n.breadcrumb a { color: #0969da; text-decoration: none; font-weight: 500; }\n.breadcrumb a:hover { text-decoration: underline; }\n.breadcrumb span { margin: 0 6px; color: #d0d7de; }\n.question-list { display: flex; flex-direction: column; gap: 0; }\n.question-card { background: #fff; border: 1px solid #d0d7de; padding: 20px; margin-bottom: 12px; cursor: pointer; transition: all 0.2s; display: flex; gap: 16px; }\n.question-card:hover { border-color: #0969da; box-shadow: 0 1px 3px rgba(0,0,0,0.08); }\n.question-title { font-size: 18px; font-weight: 600; color: #0969da; margin-bottom: 8px; }\n.question-title:hover { color: #0550ae; }\n.question-content { color: #24292f; font-size: 14px; margin-bottom: 8px; line-height: 1.5; }\n.question-meta { color: #57606a; font-size: 12px; display: flex; gap: 12px; align-items: center; }\n.question-meta a { color: #24292f; text-decoration: none; font-weight: 500; }\n.question-meta a:hover { color: #0969da; }\n.question-detail { background: #fffef0; border: 1px solid #d0d7de; padding: 32px; margin-bottom: 16px; display: flex; gap: 16px; }\n.question-detail h2 { font-size: 28px; font-weight: 600; color: #24292f; margin-bottom: 16px; }\n.question-detail p { color: #24292f; line-height: 1.6; font-size: 16px; }\n.content-body { flex: 1; }\n.answers-section { background: #e3f2fd; padding: 24px 0; }\n.answers-header { margin-bottom: 24px; }\n.answers-header h2 { font-size: 20px; font-weight: 600; color: #24292f; margin: 0; }\n.answer-meta-inline { color: #57606a; font-size: 12px; display: none; }\n.answer-meta-inline a { color: #24292f; text-decoration: none; font-weight: 500; }\n.answer-meta-inline a:hover { text-decoration: underline; }\n.answers-title { font-size: 20px; font-weight: 600; color: #24292f; margin-bottom: 24px; }\n.answers-list { display: flex; flex-direction: column; gap: 16px; }\n.answer-detail { background: #f0fff4 !important; border: 1px solid #d0d7de !important; padding: 24px !important; padding-left: 34px !important; display: flex !important; gap: 16px !important; margin-bottom: 16px !important; }\n.answer-content { color: #24292f !important; line-height: 1.6; margin-bottom: 12px; font-size: 15px; }\n.answer-meta { color: #57606a !important; font-size: 12px; display: flex; gap: 12px; align-items: center; }\n.answer-meta span { color: #57606a !important; }\n.answer-meta a { color: #24292f !important; }\n.answer-meta a { color: #24292f; text-decoration: none; font-weight: 500; }\n.answer-meta a:hover { color: #0969da; }\n.no-answers, .no-questions { text-align: center; padding: 60px 20px; color: #57606a; background: #fff; border: 1px dashed #d0d7de; }\n.auth-form { max-width: 800px; margin: 40px auto; background: #fff; border: 1px solid #d0d7de; padding: 32px; }\n.auth-form h2 { font-size: 24px; font-weight: 600; margin-bottom: 24px; color: #24292f; }\n.form-group { margin-bottom: 16px; }\n.form-group label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px; color: #24292f; }\n.form-group input, .form-group textarea { width: 100%; padding: 10px 12px; border: 1px solid #d0d7de; background: #fff; color: #24292f; font-size: 14px; font-family: inherit; transition: border 0.2s; }\n.form-group input:focus, .form-group textarea:focus { outline: none; border-color: #0969da; }\n.form-group textarea { resize: vertical; min-height: 120px; }\n.submit-btn { padding: 10px 20px; background: #218838; color: #fff; border: none; cursor: pointer; font-size: 14px; font-weight: 600; transition: background 0.2s; }\n.submit-btn:hover { background: #1e7e34; }\n.submit-btn:disabled { opacity: 0.5; cursor: not-allowed; }\n.error-message { background: #d1242f; color: #fff; padding: 12px 16px; margin-bottom: 16px; border: 1px solid #a50e0e; }\n.success-message { background: #218838; color: #fff; padding: 12px 16px; margin-bottom: 16px; border: 1px solid #1e7e34; }\n.auth-link { margin-top: 20px; font-size: 14px; color: #57606a; }\n.auth-link a { color: #0969da; text-decoration: none; }\n.auth-link a:hover { text-decoration: underline; }\n.admin-panel { background: #fff; border: 1px solid #d0d7de; padding: 32px; }\n.admin-panel h2 { font-size: 24px; font-weight: 600; margin-bottom: 24px; color: #24292f; }\n.admin-panel h3 { font-size: 18px; font-weight: 600; margin: 32px 0 16px 0; padding-top: 24px; border-top: 1px solid #d0d7de; color: #24292f; }\n.admin-panel table { width: 100%; border-collapse: collapse; margin-top: 16px; background: #fff; }\n.admin-panel th { background: #f6f8fa; padding: 12px; text-align: left; border: 1px solid #d0d7de; font-weight: 600; font-size: 13px; color: #24292f; }\n.admin-panel td { padding: 12px; border: 1px solid #d0d7de; font-size: 14px; color: #24292f; }\n.admin-panel tr:hover { background: #f6f8fa; }\n.admin-panel input[type=\"text\"], .admin-panel input[type=\"email\"], .admin-panel select { padding: 8px 12px; border: 1px solid #d0d7de; font-size: 14px; width: 100%; max-width: 300px; }\n.admin-panel input[type=\"text\"]:focus, .admin-panel input[type=\"email\"]:focus, .admin-panel select:focus { outline: none; border-color: #0969da; }\n.modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(1, 4, 9, 0.6); display: flex; align-items: center; justify-content: center; z-index: 9999; }\n.modal { background: #fff; border: 1px solid #d0d7de; padding: 32px; min-width: 560px; max-width: 640px; max-height: 90vh; overflow-y: auto; box-shadow: 0 16px 64px rgba(31, 35, 40, 0.3); }\n.modal h3 { font-size: 20px; font-weight: 600; margin-bottom: 24px; color: #24292f; }\n.modal .form-group { margin-bottom: 16px; }\n.modal .form-group label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px; color: #24292f; }\n.modal .form-group input, .modal .form-group textarea { width: 100%; padding: 10px 12px; border: 1px solid #d0d7de; background: #fff; color: #24292f; font-size: 14px; font-family: inherit; transition: border 0.2s; }\n.modal .form-group input:focus, .modal .form-group textarea:focus { outline: none; border-color: #0969da; }\n.modal .form-group textarea { resize: vertical; min-height: 120px; }\n.modal-actions { display: flex; gap: 12px; margin-top: 24px; justify-content: flex-end; }\n.admin-btn { padding: 10px 20px; background: #218838; color: #fff; border: none; cursor: pointer; font-size: 14px; font-weight: 600; transition: background 0.2s; }\n.admin-btn:hover { background: #1e7e34; }\n.admin-btn.secondary { background: #f6f8fa; border: 1px solid #d0d7de; color: #24292f; }\n.admin-btn.secondary:hover { background: #eaeef2; }\n.vote-buttons { display: flex; flex-direction: column; align-items: center; gap: 8px; min-width: 48px; }\n.vote-section { display: flex !important; flex-direction: column !important; align-items: center !important; gap: 8px !important; min-width: 48px !important; }\n.vote-btn { background: #f6f8fa !important; border: 1px solid #d0d7de !important; width: 40px !important; height: 40px !important; cursor: pointer !important; font-size: 18px !important; color: #57606a !important; transition: all 0.2s !important; display: flex !important; align-items: center !important; justify-content: center !important; }\n.vote-btn:hover { background: #eaeef2 !important; }\n.vote-btn.upvote { color: #218838 !important; border-color: #218838 !important; background: #fff !important; }\n.vote-btn.upvote:hover { color: #1e7e34 !important; border-color: #1e7e34 !important; background: #dafbe1 !important; }\n.vote-btn.downvote { color: #d1242f !important; border-color: #d1242f !important; background: #fff !important; }\n.vote-btn.downvote:hover { color: #a50e0e !important; border-color: #a50e0e !important; background: #ffebe9 !important; }\n.vote-count { font-weight: 700 !important; font-size: 16px !important; color: #24292f !important; }\n.question-card-inner { display: flex !important; gap: 16px !important; }\n.question-card-content { flex: 1 !important; }\n.question-card-title { margin: 0 0 8px 0 !important; color: #0969da !important; font-size: 18px !important; font-weight: 600 !important; }\n.question-card-excerpt { color: #24292f !important; margin: 0 0 12px 0 !important; line-height: 1.5 !important; font-size: 14px !important; }\n.question-card-meta { display: flex !important; align-items: center !important; gap: 12px !important; font-size: 12px !important; color: #57606a !important; }\n.question-card-meta strong { color: #0969da !important; }\n.question-card-meta a { color: #0969da !important; text-decoration: none !important; font-weight: 500 !important; }\n.question-card-meta a:hover { text-decoration: underline !important; }\n.questions-header { display: flex !important; justify-content: space-between !important; align-items: center !important; margin-bottom: 24px !important; }\n.pagination { display: flex !important; justify-content: center !important; align-items: center !important; gap: 8px !important; margin-top: 32px !important; }\n.pagination-btn { padding: 8px 16px !important; background: #fff !important; border: 1px solid #d0d7de !important; color: #24292f !important; text-decoration: none !important; font-size: 14px !important; font-weight: 500 !important; transition: all 0.2s !important; }\n.pagination-btn:hover { background: #f6f8fa !important; border-color: #0969da !important; }\n.pagination-btn.active { background: #218838 !important; border-color: #218838 !important; color: #fff !important; }\n.vote-buttons span { font-weight: 700; font-size: 16px; color: #24292f; }\n.loading { text-align: center; padding: 60px; color: #57606a; font-size: 16px; }\n@media (max-width: 1280px) { #app { width: 90%; } .header-content { padding: 0 24px; } }\n@media (max-width: 768px) { header { padding: 12px 16px; } #app { width: 95%; padding: 16px; } .header-content { flex-direction: row; justify-content: space-between; align-items: center; padding: 0 16px; } .user-nav { display: none !important; } .mobile-menu-btn { display: flex !important; } .modal { min-width: unset; width: 90%; padding: 24px; } .question-card { flex-direction: column; } .vote-btn { width: 28px !important; height: 28px !important; font-size: 13px !important; } .vote-count { font-size: 13px !important; } h1 { font-size: 17px !important; } h2 { font-size: 15px !important; } .site-title { font-size: 17px !important; } .answers-header { display: flex !important; flex-direction: row !important; align-items: center !important; gap: 8px !important; flex-wrap: nowrap !important; margin-bottom: 16px !important; } .answers-header h2 { font-size: 15px !important; margin: 0 !important; white-space: nowrap; } .answer-meta-inline { display: flex !important; flex-wrap: nowrap !important; gap: 6px !important; font-size: 11px !important; white-space: nowrap; } .answer-detail:first-child .answer-meta { display: none !important; } .answer-meta { flex-wrap: nowrap !important; white-space: nowrap; gap: 6px !important; font-size: 11px !important; } .answer-meta span { display: inline !important; } .question-content { font-size: 13px !important; } .answer-content { font-size: 13px !important; } .answer-detail { padding-left: 5px !important; } .question-detail { padding-left: 5px !important; } }\n@media (min-width: 1920px) { #app { width: 60%; max-width: 1400px; } }`;\n\nconst JS = `class App {\n  constructor() {\n    this.app = document.getElementById('app');\n    this.userNav = document.getElementById('userNav');\n    this.currentUser = null;\n    this.translations = {};\n    this.lang = 'tr';\n    this.init();\n  }\n\n  // Translation helper method\n  t(key, fallback = key) {\n    return this.translations[key] || fallback;\n  }\n\n  async init() {\n    try {\n      await this.loadTranslations();\n      await Promise.all([this.checkAuth(), this.loadSiteSettings()]);\n      this.setupRouter();\n      \n      // Check if we have server-rendered content (SSR)\n      const hasSSRContent = this.app.innerHTML && !this.app.innerHTML.includes('Loading...');\n      \n      // Always call route to handle dynamic content (like answer forms)\n      this.route();\n\n      // Attach ask question button handler if present\n      this.attachAskQuestionButton();\n      \n      // Attach vote button event listeners (SSR and client-side)\n      this.attachVoteButtonListeners();\n      this.attachQuestionCardListeners();\n\n      window.addEventListener('popstate', () => this.route());\n    } catch (error) {\n      console.error('App initialization error:', error);\n      this.app.innerHTML = '<div class=\"loading\">' + (this.translations['error.load_app'] || 'Uygulama y\u00FCklenemedi. L\u00FCtfen yenileyin.') + '</div>';\n    }\n  }\n\n  attachVoteButtonListeners() {\n    // Use event delegation for all vote buttons (SSR and client-side)\n    document.addEventListener('click', (e) => {\n      const button = e.target.closest('.vote-btn');\n      if (!button) return;\n      \n      e.preventDefault();\n      e.stopPropagation();\n      \n      const itemId = button.dataset.id;\n      const itemType = button.dataset.type;\n      const isUpvote = button.classList.contains('upvote');\n      const voteValue = isUpvote ? 1 : -1;\n      \n      if (itemId && itemType) {\n        this.vote(itemType, itemId, voteValue);\n      }\n    });\n  }\n\n  attachQuestionCardListeners() {\n    // Use event delegation for question card clicks\n    document.addEventListener('click', (e) => {\n      // Don't navigate if clicking vote buttons or other interactive elements\n      if (e.target.closest('.vote-btn') || e.target.closest('button') || e.target.closest('a')) {\n        return;\n      }\n      \n      const card = e.target.closest('.question-card');\n      if (!card) return;\n      \n      const questionId = card.dataset.questionId;\n      if (questionId) {\n        window.location = '/q/' + questionId;\n      }\n    });\n  }\n\n  attachAskQuestionButton() {\n    const btn = document.getElementById('askQuestionBtn');\n    if (btn) {\n      btn.addEventListener('click', () => this.handleAskQuestionClick());\n    }\n  }\n\n  async loadTranslations() {\n    try {\n      const response = await fetch('/api/translations');\n      const data = await response.json();\n      this.translations = data.translations || {};\n      this.lang = data.lang || 'tr';\n      document.documentElement.lang = this.lang;\n    } catch (error) {\n      console.error('Failed to load translations:', error);\n    }\n  }\n\n  async loadSiteSettings() {\n    try {\n      const response = await fetch('/api/settings');\n      const settings = await response.json();\n      \n      if (settings.site_title) {\n        document.getElementById('siteTitle').textContent = settings.site_title;\n        document.title = settings.site_title;\n      }\n      if (settings.site_tagline) {\n        document.getElementById('siteTagline').textContent = settings.site_tagline;\n      }\n    } catch (error) {\n      console.error('Failed to load site settings:', error);\n    }\n  }\n\n  async checkAuth() {\n    try {\n      const response = await fetch('/api/auth/me', {\n        credentials: 'include'\n      });\n      const data = await response.json();\n      this.currentUser = data.user;\n      this.updateNav();\n    } catch (error) {\n      console.error('Auth check failed:', error);\n    }\n  }\n\n  updateNav() {\n    if (this.currentUser) {\n      this.userNav.innerHTML = \\`\n        <a href=\"/u/\\${this.escapeHtml(this.currentUser.username)}\" class=\"user-info\">@\\${this.escapeHtml(this.currentUser.username)}\\${this.currentUser.role === 'admin' ? ' (Admin)' : ''}</a>\n        <a href=\"/profile\" class=\"btn-secondary\">\\${this.t('nav.profile', 'Profile')}</a>\n        \\${this.currentUser.role === 'admin' ? \\`<a href=\"/admin\" class=\"btn-secondary\">\\${this.t('nav.admin', 'Admin Panel')}</a>\\` : ''}\n        <button class=\"btn-logout\" onclick=\"app.logout()\">\\${this.t('nav.logout', 'Logout')}</button>\n      \\`;\n    } else {\n      this.userNav.innerHTML = \\`\n        <a href=\"/login\" class=\"btn-secondary\">\\${this.t('nav.login', 'Login')}</a>\n        <a href=\"/register\" class=\"btn-primary\">\\${this.t('nav.signup', 'Kay\u0131t Ol')}</a>\n      \\`;\n    }\n  }\n\n  setupRouter() {\n    document.addEventListener('click', (e) => {\n      if (e.target.tagName === 'A' && e.target.href && e.target.href.startsWith(window.location.origin)) {\n        e.preventDefault();\n        const path = new URL(e.target.href).pathname;\n        this.navigate(path);\n      }\n    });\n  }\n\n  navigate(path) {\n    window.history.pushState({}, '', path);\n    this.route();\n  }\n\n  route() {\n    const path = window.location.pathname;\n\n    if (path === '/' || path.startsWith('/p/')) {\n      const page = path === '/' ? 1 : parseInt(path.split('/')[2]) || 1;\n      this.showHome(page);\n    } else if (path === '/login') {\n      this.showLogin();\n    } else if (path === '/register') {\n      this.showRegister();\n    } else if (path === '/profile') {\n      this.showProfile();\n    } else if (path === '/admin') {\n      this.showAdmin();\n    } else if (path.startsWith('/q/')) {\n      const questionId = path.split('/')[2];\n      this.handleQuestionPage(questionId);\n    } else if (path.startsWith('/u/')) {\n      const username = path.split('/')[2];\n      this.showUser(username);\n    } else {\n      this.show404();\n    }\n  }\n\n  handleQuestionPage(questionId) {\n    // Check if SSR content exists\n    const placeholder = document.getElementById('answerFormPlaceholder');\n    \n    if (placeholder && !window.app._hasNavigated) {\n      // SSR content exists, just populate the answer form\n      window.app._hasNavigated = true;\n      this.populateAnswerForm(questionId, placeholder);\n    } else {\n      // No SSR, render client-side\n      this.showQuestion(questionId);\n    }\n  }\n\n  populateAnswerForm(questionId, placeholder) {\n    if (this.currentUser) {\n      placeholder.innerHTML = \\`\n        <div class=\"auth-form\">\n          <h3>\\${this.t('misc.your_answer', 'Cevab\u0131n\u0131z')}</h3>\n          <div id=\"answerMessage\"></div>\n          <form id=\"answerForm\">\n            <div class=\"form-group\">\n              <label for=\"answerContent\">\\${this.t('misc.share_knowledge', 'Bilginizi payla\u015F\u0131n')}</label>\n              <textarea id=\"answerContent\" rows=\"6\" required style=\"min-height: 100px;\"></textarea>\n            </div>\n            <button type=\"submit\" class=\"submit-btn\">\\${this.t('button.post_answer', 'Cevap G\u00F6nder')}</button>\n          </form>\n        </div>\n      \\`;\n      \n      document.getElementById('answerForm').addEventListener('submit', (e) => this.handlePostAnswer(e, questionId));\n    } else {\n      placeholder.innerHTML = \\`<div class=\"auth-link\">\\${this.t('message.login_to_answer', 'Cevap g\u00F6ndermek i\u00E7in giri\u015F yap\u0131n')}</div>\\`;\n    }\n  }\n\n  async showHome(page = 1) {\n    // Skip re-rendering only on initial page load when SSR content matches current page\n    const isInitialLoad = !window.app._hasNavigated;\n    const hasSSRContent = this.app.innerHTML.includes('question-card') || this.app.innerHTML.includes('questions-container');\n    \n    if (isInitialLoad && hasSSRContent) {\n      window.app._hasNavigated = true;\n      return;\n    }\n    \n    window.app._hasNavigated = true;\n    this.app.innerHTML = '<div class=\"loading\">' + this.t('misc.loading_questions', 'Sorular y\u00FCkleniyor...') + '</div>';\n    \n    // For client-side navigation, just reload the page to get SSR content for the new page\n    window.location.href = page === 1 ? '/' : \\`/p/\\${page}\\`;\n  }\n\n  async showQuestion(questionId) {\n    this.app.innerHTML = '<div class=\"loading\">' + this.t('misc.loading_question', 'Soru y\u00FCkleniyor...') + '</div>';\n    \n    try {\n      const response = await fetch(\\`/api/q/\\${questionId}\\`);\n      const data = await response.json();\n      \n      if (data.error) {\n        this.app.innerHTML = \\`<div class=\"loading\">Error: \\${data.error}</div>\\`;\n        return;\n      }\n\n      const { question, answers } = data;\n      \n      this.app.innerHTML = \\`\n        <nav class=\"breadcrumb\">\n          <a href=\"/\">\\${this.t('nav.home', 'Home')}</a>\n          <span>></span>\n          <span>\\${this.escapeHtml(question.title)}</span>\n        </nav>\n        \n        <div class=\"question-detail\">\n          \\${this.currentUser ? \\`\n            <div class=\"vote-buttons\">\n              <button onclick=\"app.vote('question', \\${question.id}, 1)\" class=\"vote-btn\">\u25B2</button>\n              <span id=\"question-\\${question.id}-votes\">\\${question.votes || 0}</span>\n              <button onclick=\"app.vote('question', \\${question.id}, -1)\" class=\"vote-btn\">\u25BC</button>\n            </div>\n          \\` : ''}\n          <div class=\"content-body\">\n            <h1>\\${this.escapeHtml(question.title)}</h1>\n            <div class=\"question-content\">\\${this.formatTextWithParagraphs(question.content)}</div>\n            <div class=\"question-meta\">\n             \n              \\${question.username ? \\`<a href=\"/u/\\${this.escapeHtml(question.username)}\">@\\${this.escapeHtml(question.username)}</a>\\` : '<span>' + this.t('misc.anonymous', 'Anonim') + '</span>'}\n              <span>\u2022</span>\n              <span>\\${new Date(question.created_at).toLocaleDateString()}</span>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"answers-section\">\n          <div class=\"answers-header\">\n            <h2>\\${this.t('misc.answers', 'Answers')} (\\${answers.length})</h2>\n            \\${answers.length > 0 ? \\`\n              <span class=\"answer-meta-inline\">\n                \\${answers[0].username ? \\`\\${this.t('user.asked_by', '')} <a href=\"/u/\\${this.escapeHtml(answers[0].username)}\">@\\${this.escapeHtml(answers[0].username)}</a>\\` : this.t('misc.anonymous', 'Anonim')}\n                <span>\u2022</span>\n                <span>\\${new Date(answers[0].created_at).toLocaleDateString()}</span>\n              </span>\n            \\` : ''}\n          </div>\n          \n          \\${answers.length > 0 ? \\`\n            <div class=\"answers-list\">\n              \\${answers.map((a, index) => \\`\n                <div class=\"answer-detail\">\n                  \\${this.currentUser ? \\`\n                    <div class=\"vote-buttons\">\n                      <button onclick=\"app.vote('answer', \\${a.id}, 1)\" class=\"vote-btn\">\u25B2</button>\n                      <span id=\"answer-\\${a.id}-votes\">\\${a.votes || 0}</span>\n                      <button onclick=\"app.vote('answer', \\${a.id}, -1)\" class=\"vote-btn\">\u25BC</button>\n                    </div>\n                  \\` : ''}\n                  <div class=\"content-body\">\n                    <div class=\"answer-content\">\\${this.formatTextWithParagraphs(a.content)}</div>\n                    <div class=\"answer-meta\">\n                      \\${a.username ? \\`<a href=\"/u/\\${this.escapeHtml(a.username)}\">@\\${this.escapeHtml(a.username)}</a>\\` : '<span>' + this.t('misc.anonymous', 'Anonim') + '</span>'}\n                      <span>\u2022</span>\n                      <span>\\${new Date(a.created_at).toLocaleDateString()}</span>\n                    </div>\n                  </div>\n                </div>\n              \\`).join('')}\n            </div>\n          \\` : '<div class=\"no-answers\">' + this.t('message.no_answers_long', 'Bu soru i\u00E7in hen\u00FCz cevap yok. \u0130lk cevaplayan siz olun!') + '</div>'}\n        </div>\n\n        \\${this.currentUser ? \\`\n          <div class=\"auth-form\">\n            <h3>\\${this.t('misc.your_answer', 'Cevab\u0131n\u0131z')}</h3>\n            <div id=\"answerMessage\"></div>\n            <form id=\"answerForm\">\n              <div class=\"form-group\">\n                <label for=\"answerContent\">\\${this.t('misc.share_knowledge', 'Bilginizi payla\u015F\u0131n')}</label>\n                <textarea id=\"answerContent\" rows=\"6\" required style=\"min-height: 100px;\"></textarea>\n              </div>\n              <button type=\"submit\" class=\"submit-btn\">\\${this.t('button.post_answer', 'Cevap G\u00F6nder')}</button>\n            </form>\n          </div>\n        \\` : '<div class=\"auth-link\">' + this.t('message.login_to_answer', 'Cevap g\u00F6ndermek i\u00E7in giri\u015F yap\u0131n') + '</div>'}\n      \\`;\n\n      if (this.currentUser) {\n        document.getElementById('answerForm').addEventListener('submit', (e) => this.handlePostAnswer(e, questionId));\n      }\n    } catch (error) {\n      this.app.innerHTML = '<div class=\"loading\">' + this.t('error.load_question', 'Soru y\u00FCklenemedi') + ': ' + error.message + '</div>';\n    }\n  }\n\n  showLogin() {\n    this.app.innerHTML = \\`\n      <div class=\"auth-form\">\n        <h2>\\${this.t('auth.login_title', 'Login')}</h2>\n        <div id=\"authMessage\"></div>\n        <form id=\"loginForm\">\n          <div class=\"form-group\">\n            <label for=\"email\">\\${this.t('label.email', 'Email')}</label>\n            <input type=\"email\" id=\"email\" required>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"password\">\\${this.t('label.password', 'Password')}</label>\n            <input type=\"password\" id=\"password\" required>\n          </div>\n          <button type=\"submit\" class=\"submit-btn\">\\${this.t('button.login', 'Giri\u015F Yap')}</button>\n        </form>\n        <div class=\"auth-link\">\n          \\${this.t('auth.no_account', \"Hesab\u0131n\u0131z yok mu?\")} <a href=\"/register\">\\${this.t('button.signup', 'Kay\u0131t Ol')}</a>\n        </div>\n        <div class=\"auth-link\" style=\"margin-top: 0.5rem\">\n          \n        </div>\n      </div>\n    \\`;\n\n    document.getElementById('loginForm').addEventListener('submit', (e) => this.handleLogin(e));\n  }\n\n  showRegister() {\n    this.app.innerHTML = \\`\n      <div class=\"auth-form\">\n        <h2>\\${this.t('auth.create_account', 'Create Account')}</h2>\n        <div id=\"authMessage\"></div>\n        <form id=\"registerForm\">\n          <div class=\"form-group\">\n            <label for=\"username\">\\${this.t('label.username', 'Username')}</label>\n            <input type=\"text\" id=\"username\" required maxlength=\"12\" pattern=\"[a-z0-9]+\" title=\"\\${this.t('auth.username_rules', 'Lowercase letters and numbers only, max 12 characters')}\">\n            <small style=\"color: var(--text-muted); display: block; margin-top: 0.25rem;\">\\${this.t('auth.username_rules', 'Lowercase letters and numbers only, max 12 characters')}</small>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"email\">\\${this.t('label.email', 'Email')}</label>\n            <input type=\"email\" id=\"email\" required>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"password\">\\${this.t('label.password', 'Password')}</label>\n            <input type=\"password\" id=\"password\" required minlength=\"6\">\n          </div>\n          <button type=\"submit\" class=\"submit-btn\">\\${this.t('button.signup', 'Kay\u0131t Ol')}</button>\n        </form>\n        <div class=\"auth-link\">\n          \\${this.t('auth.have_account', 'Zaten hesab\u0131n\u0131z var m\u0131?')} <a href=\"/login\">\\${this.t('button.login', 'Giri\u015F Yap')}</a>\n        </div>\n      </div>\n    \\`;\n\n    document.getElementById('registerForm').addEventListener('submit', (e) => this.handleRegister(e));\n  }\n\n  async showAdmin() {\n    if (!this.currentUser || this.currentUser.role !== 'admin') {\n      this.navigate('/');\n      return;\n    }\n\n    this.app.innerHTML = '<div class=\"loading\">Loading admin panel...</div>';\n\n    try {\n      // Load all data\n      const [settings, users, questions, answers] = await Promise.all([\n        fetch('/api/admin/settings', { credentials: 'include' }).then(r => r.json()),\n        fetch('/api/admin/users', { credentials: 'include' }).then(r => r.json()),\n        fetch('/api/admin/content/questions', { credentials: 'include' }).then(r => r.json()),\n        fetch('/api/admin/content/answers', { credentials: 'include' }).then(r => r.json())\n      ]);\n\n    this.app.innerHTML = \\`\n      <style>\n        .admin-container { max-width: 1200px; margin: 0 auto; }\n        .admin-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid #d0d7de; }\n        .admin-tabs { display: flex; gap: 0; margin-bottom: 2rem; border-bottom: 1px solid #d0d7de; }\n        .admin-tab { padding: 12px 24px; background: transparent; border: 1px solid transparent; border-bottom: none; color: #656d76; cursor: pointer; font-size: 14px; transition: all 0.2s; }\n        .admin-tab:hover { color: #24292f; background: #f6f8fa; border-color: #d0d7de; border-bottom-color: transparent; }\n        .admin-tab.active { color: #24292f; background: #fff; border-color: #d0d7de; border-bottom-color: #fff; font-weight: 600; }\n        .admin-content { display: none; }\n        .admin-content.active { display: block; }\n        .admin-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 24px; margin-top: 24px; }\n        .admin-card { background: #fff; padding: 24px; border: 1px solid #d0d7de; }\n        .admin-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }\n        .admin-card h3 { margin: 0; color: #24292f; font-size: 18px; font-weight: 600; }\n        .admin-table { width: 100%; border-collapse: collapse; margin-top: 16px; background: #fff; }\n        .admin-table th { text-align: left; padding: 12px; background: #f6f8fa; border: 1px solid #d0d7de; font-weight: 600; font-size: 13px; color: #24292f; }\n        .admin-table td { padding: 12px; border: 1px solid #d0d7de; font-size: 14px; color: #24292f; }\n        .admin-table tr:hover { background: #f6f8fa; }\n        .admin-btn { padding: 10px 20px; background: #2da44e; color: #fff; border: none; cursor: pointer; font-size: 14px; font-weight: 600; transition: background 0.2s; }\n        .admin-btn:hover { background: #2c974b; }\n        .admin-btn-danger { background: #d1242f; }\n        .admin-btn-danger:hover { background: #a50e0e; }\n        .admin-btn-success { background: #2da44e; }\n        .admin-btn-success:hover { background: #2c974b; }\n        .admin-btn-sm { padding: 8px 16px; font-size: 13px; }\n        .admin-form { background: #fff; padding: 24px; border: 1px solid #d0d7de; margin-bottom: 24px; }\n        .admin-form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px; }\n        .badge { display: inline-block; padding: 4px 12px; font-size: 13px; font-weight: 600; border: 1px solid transparent; }\n        .badge-admin { background: #8250df; color: #fff; border-color: #8250df; }\n        .badge-user { background: #0969da; color: #fff; border-color: #0969da; }\n        .badge-banned { background: #d1242f; color: #fff; border-color: #d1242f; }\n        \n        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(31, 35, 40, 0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; }\n        .modal { background: #fff; padding: 32px; min-width: 560px; max-width: 640px; border: 1px solid #d0d7de; box-shadow: 0 16px 64px rgba(31, 35, 40, 0.3); }\n        .modal h3 { margin-top: 0; margin-bottom: 24px; color: #24292f; font-size: 20px; font-weight: 600; }\n        .modal-actions { display: flex; gap: 16px; margin-top: 24px; justify-content: flex-end; }\n      </style>\n\n      <div class=\"admin-container\">\n        <div class=\"admin-header\">\n          <div>\n            <h1 style=\"margin: 0;\">\\${this.t('admin.panel', 'Y\u00F6netim Paneli')}</h1>\n            <p style=\"color: var(--text-muted); margin: 0.5rem 0 0 0;\">\\${this.t('admin.welcome', 'Ho\u015F geldiniz')}, @\\${this.escapeHtml(this.currentUser.username)}</p>\n          </div>\n          <a href=\"/\" class=\"admin-btn\">\\${this.t('button.back_site', '\u2190 Siteye D\u00F6n')}</a>\n        </div>\n\n        <div class=\"admin-tabs\">\n          <button class=\"admin-tab active\" onclick=\"app.switchAdminTab('settings')\">\\${this.t('admin.tab_settings', 'Ayarlar')}</button>\n          <button class=\"admin-tab\" onclick=\"app.switchAdminTab('users')\">\\${this.t('admin.tab_users', 'Kullan\u0131c\u0131lar')}</button>\n          <button class=\"admin-tab\" onclick=\"app.switchAdminTab('questions')\">\\${this.t('admin.tab_questions', 'Sorular')}</button>\n          <button class=\"admin-tab\" onclick=\"app.switchAdminTab('answers')\">\\${this.t('admin.tab_answers', 'Cevaplar')}</button>\n        </div>\n\n        <div id=\"admin-settings\" class=\"admin-content active\">\n          <div class=\"admin-form\">\n            <h3 style=\"margin-top: 0;\">\\${this.t('admin.site_settings', 'Site Ayarlar\u0131')}</h3>\n            <div id=\"settingsMessage\"></div>\n            <form id=\"settingsForm\">\n              <div class=\"form-group\">\n                <label>\\${this.t('label.site_title', 'Site Ba\u015Fl\u0131\u011F\u0131')}</label>\n                <input type=\"text\" id=\"siteTitle\" value=\"\\${this.escapeHtml(settings.site_title || '')}\" required style=\"width: 100%; padding: 12px; background: #fff; border: 1px solid #d0d7de; color: #24292f; font-size: 14px;\">\n              </div>\n              <div class=\"form-group\">\n                <label>\\${this.t('label.site_tagline', 'Site Slogan\u0131')}</label>\n                <input type=\"text\" id=\"siteTagline\" value=\"\\${this.escapeHtml(settings.site_tagline || '')}\" required style=\"width: 100%; padding: 12px; background: #fff; border: 1px solid #d0d7de; color: #24292f; font-size: 14px;\">\n              </div>\n              <div class=\"form-group\">\n                <label>\\${this.t('label.default_language', 'Varsay\u0131lan Dil')}</label>\n                <select id=\"defaultLanguage\" style=\"width: 100%; padding: 12px; background: #fff; border: 1px solid #d0d7de; color: #24292f; font-size: 14px;\">\n                  <option value=\"tr\" \\${(settings.default_language || 'tr') === 'tr' ? 'selected' : ''}>T\u00FCrk\u00E7e (Turkish)</option>\n                  <option value=\"en\" \\${settings.default_language === 'en' ? 'selected' : ''}>English</option>\n                </select>\n              </div>\n              <button type=\"submit\" class=\"admin-btn\">\\${this.t('button.save_settings', 'Ayarlar\u0131 Kaydet')}</button>\n            </form>\n          </div>\n        </div>\n\n        <div id=\"admin-users\" class=\"admin-content\">\n          <div class=\"admin-card\">\n            <h3>\\${this.t('admin.all_users', 'T\u00FCm Kullan\u0131c\u0131lar')} (\\${users.users.length})</h3>\n            <table class=\"admin-table\">\n              <thead>\n                <tr>\n                  <th>\\${this.t('table.user_id', 'Kullan\u0131c\u0131 ID')}</th>\n                  <th>\\${this.t('table.username', 'Kullan\u0131c\u0131 Ad\u0131')}</th>\n                  <th>\\${this.t('table.email', 'E-posta')}</th>\n                  <th>\\${this.t('table.role', 'Rol')}</th>\n                  <th>\\${this.t('table.status', 'Durum')}</th>\n                  <th>\\${this.t('table.joined', 'Kat\u0131lma')}</th>\n                  <th>\\${this.t('table.actions', '\u0130\u015Flemler')}</th>\n                </tr>\n              </thead>\n              <tbody>\n                \\${users.users.map(user => \\`\n                  <tr>\n                    <td><code>\\${user.id}</code></td>\n                    <td><strong>@\\${this.escapeHtml(user.username)}</strong></td>\n                    <td>\\${this.escapeHtml(user.email)}</td>\n                    <td><span class=\"badge badge-\\${user.role}\">\\${user.role.toUpperCase()}</span></td>\n                    <td>\\${user.banned ? '<span class=\"badge badge-banned\">' + this.t('status.banned', 'BANNED') + '</span>' : '<span style=\"color: #27ae60;\">' + this.t('status.active', 'Active') + '</span>'}</td>\n                    <td>\\${new Date(user.created_at).toLocaleDateString()}</td>\n                    <td>\n                      <button onclick=\"app.toggleUserRole('\\${user.id}', '\\${user.role}')\" class=\"admin-btn admin-btn-sm\">\\${user.role === 'admin' ? this.t('button.make_user', 'Make User') : this.t('button.make_admin', 'Make Admin')}</button>\n                      <button onclick=\"app.toggleBan('\\${user.id}', \\${user.banned ? 1 : 0})\" class=\"admin-btn admin-btn-sm \\${user.banned ? 'admin-btn-success' : 'admin-btn-danger'}\">\\${user.banned ? this.t('button.unban', 'Unban') : this.t('button.ban', 'Ban')}</button>\n                    </td>\n                  </tr>\n                \\`).join('')}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        <div id=\"admin-questions\" class=\"admin-content\">\n          <div class=\"admin-card\">\n            <h3>\\${this.t('admin.all_questions', 'T\u00FCm Sorular')} (\\${questions.questions.length})</h3>\n            <table class=\"admin-table\">\n              <thead>\n                <tr>\n                  <th>\\${this.t('table.id', 'ID')}</th>\n                  <th>\\${this.t('table.title', 'Ba\u015Fl\u0131k')}</th>\n                  <th>\\${this.t('table.author', 'Yazar')}</th>\n                  <th>\\${this.t('table.votes', 'Oylar')}</th>\n                  <th>\\${this.t('table.date', 'Tarih')}</th>\n                  <th>\\${this.t('table.actions', '\u0130\u015Flemler')}</th>\n                </tr>\n              </thead>\n              <tbody>\n                \\${questions.questions.map(q => \\`\n                  <tr>\n                    <td>\\${q.id}</td>\n                    <td><strong>\\${this.escapeHtml(q.title)}</strong></td>\n                    <td>@\\${this.escapeHtml(q.username || this.t('misc.anonymous', 'Anonymous'))}</td>\n                    <td>\\${q.votes || 0}</td>\n                    <td>\\${new Date(q.created_at).toLocaleDateString()}</td>\n                    <td>\n                      <button onclick=\"app.editQuestionById(this)\" data-id=\"\\${q.id}\" data-title=\"\\${this.escapeHtml(q.title)}\" data-content=\"\\${this.escapeHtml(q.content)}\" class=\"admin-btn admin-btn-sm\">\\${this.t('button.edit', 'Edit')}</button>\n                      <button onclick=\"app.deleteQuestion(\\${q.id})\" class=\"admin-btn admin-btn-sm admin-btn-danger\">\\${this.t('button.delete', 'Delete')}</button>\n                    </td>\n                  </tr>\n                \\`).join('')}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        <div id=\"admin-answers\" class=\"admin-content\">\n          <div class=\"admin-card\">\n            <h3>\\${this.t('admin.all_answers', 'T\u00FCm Cevaplar')} (\\${answers.answers.length})</h3>\n            <table class=\"admin-table\">\n              <thead>\n                <tr>\n                  <th>\\${this.t('table.id', 'ID')}</th>\n                  <th>\\${this.t('table.title', 'Soru')}</th>\n                  <th>\\${this.t('table.content', '\u0130\u00E7erik \u00D6nizleme')}</th>\n                  <th>\\${this.t('table.author', 'Yazar')}</th>\n                  <th>\\${this.t('table.votes', 'Oylar')}</th>\n                  <th>\\${this.t('table.date', 'Tarih')}</th>\n                  <th>\\${this.t('table.actions', '\u0130\u015Flemler')}</th>\n                </tr>\n              </thead>\n              <tbody>\n                \\${answers.answers.map(a => \\`\n                  <tr>\n                    <td>\\${a.id}</td>\n                    <td>\\${this.escapeHtml(a.question_title.substring(0, 40))}...</td>\n                    <td>\\${this.escapeHtml(a.content.substring(0, 60))}...</td>\n                    <td>@\\${this.escapeHtml(a.username || this.t('misc.anonymous', 'Anonymous'))}</td>\n                    <td>\\${a.votes || 0}</td>\n                    <td>\\${new Date(a.created_at).toLocaleDateString()}</td>\n                    <td>\n                      <button onclick=\"app.editAnswerById(this)\" data-id=\"\\${a.id}\" data-content=\"\\${this.escapeHtml(a.content)}\" class=\"admin-btn admin-btn-sm\">\\${this.t('button.edit', 'Edit')}</button>\n                      <button onclick=\"app.deleteAnswer(\\${a.id})\" class=\"admin-btn admin-btn-sm admin-btn-danger\">\\${this.t('button.delete', 'Delete')}</button>\n                    </td>\n                  </tr>\n                \\`).join('')}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    \\`;\n\n      // Attach event listeners\n      document.getElementById('settingsForm').addEventListener('submit', (e) => this.handleSaveSettings(e));\n    } catch (error) {\n      console.error('Admin panel error:', error);\n      this.app.innerHTML = '<div class=\"loading\">Error loading admin panel: ' + error.message + '</div>';\n    }\n  }\n\n  async showUser(username) {\n    this.app.innerHTML = '<div class=\"loading\">Loading profile...</div>';\n    \n    try {\n      const response = await fetch(\\`/api/u/\\${username}\\`);\n      const data = await response.json();\n      \n      if (data.error) {\n        this.app.innerHTML = \\`<div class=\"loading\">Error: \\${data.error}</div>\\`;\n        return;\n      }\n\n      const { user } = data;\n      \n      this.app.innerHTML = \\`\n        <a href=\"/\" class=\"back-btn\">\\${this.t('button.back_home', '\u2190 Ana Sayfa')}</a>\n        \n        <div class=\"auth-form\">\n          <h2>@\\${this.escapeHtml(user.username)}</h2>\n          <p style=\"text-align: center; color: var(--text-muted); margin-top: 0.5rem;\">\n            \\${user.role === 'admin' ? '<span style=\"color: var(--primary);\">' + this.t('misc.administrator', 'Administrator') + '</span>' : this.t('misc.member', 'Member')}\n          </p>\n          <p style=\"text-align: center; color: var(--text-muted); margin-top: 0.5rem; font-size: 0.9rem;\">\n            \\${this.t('misc.joined', 'Joined')} \\${new Date(user.created_at).toLocaleDateString()}\n          </p>\n        </div>\n      \\`;\n    } catch (error) {\n      this.app.innerHTML = \\`<div class=\"loading\">Error loading profile: \\${error.message}</div>\\`;\n    }\n  }\n\n  showProfile() {\n    if (!this.currentUser) {\n      this.navigate('/login');\n      return;\n    }\n\n    this.app.innerHTML = \\`\n      <div class=\"auth-form\">\n        <h2>\\${this.t('profile.settings', 'Profile Settings')}</h2>\n        <p style=\"text-align: center; color: var(--text-muted); margin-bottom: 2rem;\">\n          \\${this.t('profile.logged_in_as', 'Logged in as')} <strong>@\\${this.escapeHtml(this.currentUser.username)}</strong> (\\${this.escapeHtml(this.currentUser.email)})\n        </p>\n        \n        <h3 style=\"margin-top: 2rem; margin-bottom: 1rem;\">\\${this.t('profile.change_password', '\u015Eifre De\u011Fi\u015Ftir')}</h3>\n        <div id=\"passwordMessage\"></div>\n        <form id=\"passwordForm\">\n          <div class=\"form-group\">\n            <label for=\"currentPassword\">\\${this.t('label.current_password', 'Mevcut \u015Eifre')}</label>\n            <input type=\"password\" id=\"currentPassword\" required>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"newPassword\">\\${this.t('label.new_password', 'Yeni \u015Eifre')}</label>\n            <input type=\"password\" id=\"newPassword\" required minlength=\"6\">\n          </div>\n          <div class=\"form-group\">\n            <label for=\"confirmPassword\">\\${this.t('label.confirm_password', 'Yeni \u015Eifreyi Onayla')}</label>\n            <input type=\"password\" id=\"confirmPassword\" required minlength=\"6\">\n          </div>\n          <button type=\"submit\" class=\"submit-btn\">\\${this.t('button.update_password', '\u015Eifreyi G\u00FCncelle')}</button>\n        </form>\n      </div>\n      <a href=\"/\" class=\"back-btn\" style=\"display: inline-block; margin-top: 1rem;\">\\${this.t('button.back_home', '\u2190 Ana Sayfa')}</a>\n    \\`;\n\n    document.getElementById('passwordForm').addEventListener('submit', (e) => this.handleChangePassword(e));\n  }\n\n  async handleLogin(e) {\n    e.preventDefault();\n    const messageEl = document.getElementById('authMessage');\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n\n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password }),\n        credentials: 'include'\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        messageEl.innerHTML = '<div class=\"success-message\">' + this.t('success.login', 'Login successful!') + '</div>';\n        this.currentUser = data.user;\n        this.updateNav();\n        setTimeout(() => this.navigate('/'), 1000);\n      } else {\n        messageEl.innerHTML = \\`<div class=\"error-message\">\\${data.error}</div>\\`;\n      }\n    } catch (error) {\n      messageEl.innerHTML = '<div class=\"error-message\">' + this.t('error.login', 'Login failed') + ': ' + error.message + '</div>';\n    }\n  }\n\n  async handleRegister(e) {\n    e.preventDefault();\n    const messageEl = document.getElementById('authMessage');\n    const username = document.getElementById('username').value.toLowerCase();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n\n    try {\n      const response = await fetch('/api/auth/register', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, email, password }),\n        credentials: 'include'\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        messageEl.innerHTML = '<div class=\"success-message\">' + this.t('success.registration', 'Registration successful!') + '</div>';\n        this.currentUser = data.user;\n        this.updateNav();\n        setTimeout(() => this.navigate('/'), 1000);\n      } else {\n        messageEl.innerHTML = \\`<div class=\"error-message\">\\${data.error}</div>\\`;\n      }\n    } catch (error) {\n      messageEl.innerHTML = \\`<div class=\"error-message\">Registration failed: \\${error.message}</div>\\`;\n    }\n  }\n\n  async logout() {\n    try {\n      await fetch('/api/auth/logout', {\n        method: 'POST',\n        credentials: 'include'\n      });\n      this.currentUser = null;\n      this.updateNav();\n      this.navigate('/');\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  }\n\n  handleAskQuestionClick() {\n    if (!this.currentUser) {\n      this.navigate('/login');\n      return;\n    }\n    \n    // Show question form modal\n    this.showQuestionModal();\n  }\n\n  showQuestionModal() {\n    const modal = document.createElement('div');\n    modal.className = 'modal-overlay';\n    modal.innerHTML = \\`\n      <div class=\"modal\" style=\"min-width: 600px; position: relative;\">\n        <button onclick=\"this.closest('.modal-overlay').remove()\" style=\"position: absolute; top: 16px; right: 16px; background: #d1242f; color: #fff; border: none; width: 32px; height: 32px; font-size: 20px; font-weight: 700; cursor: pointer; line-height: 1; padding: 0;\">\u00D7</button>\n        <h3>\\${this.t('modal.ask_question', 'Soru Sor')}</h3>\n        <div id=\"questionModalMessage\"></div>\n        <form id=\"questionModalForm\">\n          <div class=\"form-group\">\n            <label>\\${this.t('label.question_title', 'Soru Ba\u015Fl\u0131\u011F\u0131')}</label>\n            <input type=\"text\" id=\"modalQuestionTitle\" required maxlength=\"200\" style=\"width: 100%; padding: 12px; background: #fff; border: 1px solid #d0d7de; color: #24292f; font-size: 14px;\">\n          </div>\n          <div class=\"form-group\">\n            <label>\\${this.t('label.question_details', 'Soru Detaylar\u0131')}</label>\n            <textarea id=\"modalQuestionContent\" rows=\"8\" required style=\"width: 100%; padding: 12px; background: #fff; border: 1px solid #d0d7de; color: #24292f; font-size: 14px; font-family: inherit;\"></textarea>\n          </div>\n          <div class=\"modal-actions\">\n            <button type=\"button\" onclick=\"this.closest('.modal-overlay').remove()\" class=\"admin-btn\" style=\"background: var(--border);\">\\${this.t('button.cancel', 'Cancel')}</button>\n            <button type=\"submit\" class=\"admin-btn\">\\${this.t('button.post_question', 'Post Question')}</button>\n          </div>\n        </form>\n      </div>\n    \\`;\n    document.body.appendChild(modal);\n    \n    document.getElementById('questionModalForm').addEventListener('submit', async (e) => {\n      e.preventDefault();\n      await this.handleSubmitQuestion(modal);\n    });\n  }\n\n  async handleSubmitQuestion(modal) {\n    const messageEl = document.getElementById('questionModalMessage');\n    const title = document.getElementById('modalQuestionTitle').value;\n    const content = document.getElementById('modalQuestionContent').value;\n\n    try {\n      const response = await fetch('/api/questions', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ title, content }),\n        credentials: 'include'\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        messageEl.innerHTML = '<div class=\"success-message\">' + this.t('success.question_posted', 'Question posted successfully!') + '</div>';\n        setTimeout(() => {\n          modal.remove();\n          this.navigate(\\`/q/\\${data.questionId}\\`);\n        }, 1000);\n      } else {\n        messageEl.innerHTML = \\`<div class=\"error-message\">\\${data.error}</div>\\`;\n      }\n    } catch (error) {\n      messageEl.innerHTML = '<div class=\"error-message\">' + this.t('error.post_question', 'Failed to post question') + ': ' + error.message + '</div>';\n    }\n  }\n\n  toggleQuestionForm() {\n    const formContainer = document.getElementById('questionFormContainer');\n    if (formContainer) {\n      const isHidden = formContainer.style.display === 'none';\n      formContainer.style.display = isHidden ? 'block' : 'none';\n      if (isHidden) {\n        formContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n      }\n    }\n  }\n\n  async handleAskQuestion(e) {\n    e.preventDefault();\n    const messageEl = document.getElementById('questionMessage');\n    const title = document.getElementById('questionTitle').value;\n    const content = document.getElementById('questionContent').value;\n\n    try {\n      const response = await fetch('/api/questions', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ title, content }),\n        credentials: 'include'\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        messageEl.innerHTML = '<div class=\"success-message\">' + this.t('success.question_posted', 'Soru ba\u015Far\u0131yla g\u00F6nderildi!') + '</div>';\n        setTimeout(() => this.navigate(\\`/q/\\${data.questionId}\\`), 1000);\n      } else {\n        messageEl.innerHTML = \\`<div class=\"error-message\">\\${data.error}</div>\\`;\n      }\n    } catch (error) {\n      messageEl.innerHTML = '<div class=\"error-message\">' + this.t('error.post_question', 'Soru g\u00F6nderilemedi') + ': ' + error.message + '</div>';\n    }\n  }\n\n  async handlePostAnswer(e, questionId) {\n    e.preventDefault();\n    const messageEl = document.getElementById('answerMessage');\n    const content = document.getElementById('answerContent').value;\n\n    try {\n      const response = await fetch(\\`/api/q/\\${questionId}/answer\\`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ content }),\n        credentials: 'include'\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        messageEl.innerHTML = '<div class=\"success-message\">' + this.t('success.answer_posted', 'Cevap ba\u015Far\u0131yla g\u00F6nderildi!') + '</div>';\n        setTimeout(() => this.showQuestion(questionId), 1000);\n      } else {\n        messageEl.innerHTML = \\`<div class=\"error-message\">\\${data.error}</div>\\`;\n      }\n    } catch (error) {\n      messageEl.innerHTML = '<div class=\"error-message\">' + this.t('error.post_answer', 'Cevap g\u00F6nderilemedi') + ': ' + error.message + '</div>';\n    }\n  }\n\n  async handleChangePassword(e) {\n    e.preventDefault();\n    const messageEl = document.getElementById('passwordMessage');\n    const currentPassword = document.getElementById('currentPassword').value;\n    const newPassword = document.getElementById('newPassword').value;\n    const confirmPassword = document.getElementById('confirmPassword').value;\n\n    if (newPassword !== confirmPassword) {\n      messageEl.innerHTML = '<div class=\"error-message\">New passwords do not match</div>';\n      return;\n    }\n\n    try {\n      const response = await fetch('/api/auth/change-password', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ currentPassword, newPassword }),\n        credentials: 'include'\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        messageEl.innerHTML = '<div class=\"success-message\">' + this.t('success.password_changed', '\u015Eifre ba\u015Far\u0131yla de\u011Fi\u015Ftirildi!') + '</div>';\n        document.getElementById('passwordForm').reset();\n      } else {\n        messageEl.innerHTML = \\`<div class=\"error-message\">\\${data.error}</div>\\`;\n      }\n    } catch (error) {\n      messageEl.innerHTML = '<div class=\"error-message\">' + this.t('error.change_password', '\u015Eifre de\u011Fi\u015Ftirilemedi') + ': ' + error.message + '</div>';\n    }\n  }\n\n  show404() {\n    this.app.innerHTML = \\`\n      <div class=\"loading\">\n        <h2>\\${this.t('error.404_title', '404 - Sayfa Bulunamad\u0131')}</h2>\n        <p>\\${this.t('error.404_message', 'Arad\u0131\u011F\u0131n\u0131z sayfa mevcut de\u011Fil.')}</p>\n        <a href=\"/\" class=\"back-btn\">\\${this.t('button.back_home', '\u2190 Ana Sayfa')}</a>\n      </div>\n    \\`;\n  }\n\n  escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  formatTextWithParagraphs(text) {\n    if (!text) return '';\n    \n    const escaped = this.escapeHtml(text);\n    const paragraphs = escaped.split(/\\\\n\\\\n+/);\n    \n    const formatted = paragraphs\n      .map(p => p.trim())\n      .filter(p => p.length > 0)\n      .map(p => \\`<p style=\"margin-bottom: 12px;\">\\${p.replace(/\\\\n/g, '<br>')}</p>\\`)\n      .join('');\n    \n    return formatted || \\`<p>\\${escaped}</p>\\`;\n  }\n\n  escapeJs(text) {\n    if (!text) return '';\n    return JSON.stringify(text).slice(1, -1);\n  }\n\n  getQualityBadge(votes) {\n    if (votes >= 5) {\n      return '<span style=\"background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; padding: 0.375rem 0.875rem; border-radius: 16px; font-size: 0.8125rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; box-shadow: 0 2px 4px rgba(39, 174, 96, 0.3);\">' + this.t('badge.high_quality', 'Y\u00FCksek Kalite') + '</span>';\n    } else if (votes <= -3) {\n      return '<span style=\"background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; padding: 0.375rem 0.875rem; border-radius: 16px; font-size: 0.8125rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; box-shadow: 0 2px 4px rgba(231, 76, 60, 0.3);\">' + this.t('badge.low_quality', 'D\u00FC\u015F\u00FCk Kalite') + '</span>';\n    }\n    return ''; // No badge for votes between -2 and 4\n  }\n\n  async vote(itemType, itemId, voteValue) {\n    if (!this.currentUser) {\n      alert(this.t('error.login_required', 'L\u00FCtfen oy vermek i\u00E7in giri\u015F yap\u0131n'));\n      this.navigate('/login');\n      return;\n    }\n\n    try {\n      const url = '/api/' + itemType + 's/' + itemId + '/vote';\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ vote: voteValue }),\n        credentials: 'include'\n      });\n\n      const data = await response.json();\n      \n      if (response.ok) {\n        // Update the vote count in the UI\n        // Use 'a' for answers, 'question' for questions\n        const prefix = itemType === 'answer' ? 'a' : itemType;\n        const voteElementId = prefix + '-' + itemId + '-votes';\n        const voteElement = document.getElementById(voteElementId);\n        if (voteElement) {\n          voteElement.textContent = data.votes;\n        }\n        \n        // Update quality badge without refreshing the page\n        const badgeElementId = prefix + '-' + itemId + '-badge';\n        const badgeElement = document.getElementById(badgeElementId);\n        if (badgeElement) {\n          badgeElement.outerHTML = this.getQualityBadge(data.votes);\n        }\n      } else {\n        alert(this.t('error.generic', 'Hata') + ': ' + data.error);\n      }\n    } catch (error) {\n      alert(this.t('error.vote_failed', 'Oy kullan\u0131lamad\u0131') + ': ' + error.message);\n    }\n  }\n\n  // Admin handler methods\n  switchAdminTab(tabName) {\n    document.querySelectorAll('.admin-tab').forEach(tab => tab.classList.remove('active'));\n    document.querySelectorAll('.admin-content').forEach(content => content.classList.remove('active'));\n    \n    event.target.classList.add('active');\n    document.getElementById('admin-' + tabName).classList.add('active');\n  }\n\n  async handleSaveSettings(e) {\n    e.preventDefault();\n    const messageEl = document.getElementById('settingsMessage');\n    const site_title = document.getElementById('siteTitle').value;\n    const site_tagline = document.getElementById('siteTagline').value;\n    const default_language = document.getElementById('defaultLanguage').value;\n\n    try {\n      const response = await fetch('/api/admin/settings', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ site_title, site_tagline, default_language }),\n        credentials: 'include'\n      });\n\n      const data = await response.json();\n      if (response.ok) {\n        messageEl.innerHTML = '<div class=\"success-message\">' + this.t('success.settings_saved', 'Ayarlar kaydedildi! Yeniden y\u00FCkleniyor...') + '</div>';\n        // Force hard reload without cache\n        setTimeout(() => {\n          window.location.reload(true);\n        }, 1000);\n      } else {\n        messageEl.innerHTML = '<div class=\"error-message\">' + data.error + '</div>';\n      }\n    } catch (error) {\n      messageEl.innerHTML = '<div class=\"error-message\">' + this.t('error.save_settings', 'Failed to save settings') + ': ' + error.message + '</div>';\n    }\n  }\n\n  async toggleUserRole(userId, currentRole) {\n    const newRole = currentRole === 'admin' ? 'user' : 'admin';\n    if (!confirm(this.t('confirm.change_role', 'Kullan\u0131c\u0131 rol\u00FCn\u00FC de\u011Fi\u015Ftir') + ': ' + newRole + '?')) return;\n\n    try {\n      const response = await fetch(\\`/api/admin/users/\\${userId}/role\\`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ role: newRole }),\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        this.showAdmin();\n      } else {\n        const data = await response.json();\n        alert(this.t('error.generic', 'Hata') + ': ' + data.error);\n      }\n    } catch (error) {\n      alert(this.t('error.update_user_role', 'Kullan\u0131c\u0131 rol\u00FC g\u00FCncellenemedi') + ': ' + error.message);\n    }\n  }\n\n  async toggleBan(userId, currentBanned) {\n    const newBanned = currentBanned ? 0 : 1;\n    if (!confirm(newBanned ? this.t('confirm.ban_user', 'Ban this user?') : this.t('confirm.unban_user', 'Unban this user?'))) return;\n\n    try {\n      const response = await fetch(\\`/api/admin/users/\\${userId}/ban\\`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ banned: newBanned }),\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        this.showAdmin();\n      } else {\n        const data = await response.json();\n        alert(this.t('error.generic', 'Hata') + ': ' + data.error);\n      }\n    } catch (error) {\n      alert(this.t('error.update_ban_status', 'Kullan\u0131c\u0131 ban durumu g\u00FCncellenemedi') + ': ' + error.message);\n    }\n  }\n\n  editQuestionById(button) {\n    const id = button.dataset.id;\n    const title = button.dataset.title;\n    const content = button.dataset.content;\n    this.showEditQuestionModal(id, title, content);\n  }\n\n  showEditQuestionModal(id, title, content) {\n    const modal = document.createElement('div');\n    modal.className = 'modal-overlay';\n    modal.innerHTML = \\`\n      <div class=\"modal\">\n        <h3>\\${this.t('modal.edit_question', 'Edit Question')}</h3>\n        <div class=\"form-group\">\n          <label>\\${this.t('label.question_title', 'Question Title')}</label>\n          <input type=\"text\" id=\"modalQuestionTitle\" value=\"\\${this.escapeHtml(title)}\" style=\"width: 100%; padding: 12px; background: #fff; border: 1px solid #d0d7de; color: #24292f; font-size: 14px;\">\n        </div>\n        <div class=\"form-group\">\n          <label>\\${this.t('label.question_content', 'Question Content')}</label>\n          <textarea id=\"modalQuestionContent\" rows=\"5\" style=\"width: 100%; padding: 12px; background: #fff; border: 1px solid #d0d7de; color: #24292f; font-size: 14px; font-family: inherit;\">\\${this.escapeHtml(content)}</textarea>\n        </div>\n        <div class=\"modal-actions\">\n          <button onclick=\"this.closest('.modal-overlay').remove()\" class=\"admin-btn\" style=\"background: var(--border);\">\\${this.t('button.cancel', 'Cancel')}</button>\n          <button onclick=\"app.saveEditQuestion(\\${id}, this.closest('.modal-overlay'))\" class=\"admin-btn\">\\${this.t('button.save_changes', 'Save Changes')}</button>\n        </div>\n      </div>\n    \\`;\n    document.body.appendChild(modal);\n  }\n\n  async saveEditQuestion(id, modal) {\n    const newTitle = document.getElementById('modalQuestionTitle').value;\n    const newContent = document.getElementById('modalQuestionContent').value;\n\n    if (!newTitle || !newContent) return;\n\n    try {\n      const response = await fetch(\\`/api/admin/questions/\\${id}\\`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ title: newTitle, content: newContent }),\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        modal.remove();\n        this.showAdmin();\n      } else {\n        const data = await response.json();\n        alert(this.t('error.generic', 'Hata') + ': ' + data.error);\n      }\n    } catch (error) {\n      alert(this.t('error.update_question', 'Soru g\u00FCncellenemedi') + ': ' + error.message);\n    }\n  }\n\n  async deleteQuestion(id) {\n    if (!confirm(this.t('confirm.delete_question', 'Bu soruyu ve t\u00FCm cevaplar\u0131n\u0131 silmek istedi\u011Finizden emin misiniz?'))) return;\n\n    try {\n      const response = await fetch(\\`/api/admin/questions/\\${id}\\`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        this.showAdmin();\n      } else {\n        const data = await response.json();\n        alert(this.t('error.generic', 'Hata') + ': ' + data.error);\n      }\n    } catch (error) {\n      alert(this.t('error.delete_question', 'Soru silinemedi') + ': ' + error.message);\n    }\n  }\n\n  editAnswerById(button) {\n    const id = button.dataset.id;\n    const content = button.dataset.content;\n    this.showEditAnswerModal(id, content);\n  }\n\n  showEditAnswerModal(id, content) {\n    const modal = document.createElement('div');\n    modal.className = 'modal-overlay';\n    modal.innerHTML = \\`\n      <div class=\"modal\">\n        <h3>\\${this.t('modal.edit_answer', 'Edit Answer')}</h3>\n        <div class=\"form-group\">\n          <label>\\${this.t('label.answer_content', 'Answer Content')}</label>\n          <textarea id=\"modalAnswerContent\" rows=\"6\" style=\"width: 100%; padding: 12px; background: #fff; border: 1px solid #d0d7de; color: #24292f; font-size: 14px; font-family: inherit;\">\\${this.escapeHtml(content)}</textarea>\n        </div>\n        <div class=\"modal-actions\">\n          <button onclick=\"this.closest('.modal-overlay').remove()\" class=\"admin-btn\" style=\"background: var(--border);\">\\${this.t('button.cancel', 'Cancel')}</button>\n          <button onclick=\"app.saveEditAnswer(\\${id}, this.closest('.modal-overlay'))\" class=\"admin-btn\">\\${this.t('button.save_changes', 'Save Changes')}</button>\n        </div>\n      </div>\n    \\`;\n    document.body.appendChild(modal);\n  }\n\n  async saveEditAnswer(id, modal) {\n    const newContent = document.getElementById('modalAnswerContent').value;\n\n    if (!newContent) return;\n\n    try {\n      const response = await fetch(\\`/api/admin/answers/\\${id}\\`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ content: newContent }),\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        modal.remove();\n        this.showAdmin();\n      } else {\n        const data = await response.json();\n        alert(this.t('error.generic', 'Hata') + ': ' + data.error);\n      }\n    } catch (error) {\n      alert(this.t('error.update_answer', 'Cevap g\u00FCncellenemedi') + ': ' + error.message);\n    }\n  }\n\n  async deleteAnswer(id) {\n    if (!confirm(this.t('confirm.delete_answer', 'Bu cevab\u0131 silmek istedi\u011Finizden emin misiniz?'))) return;\n\n    try {\n      const response = await fetch(\\`/api/admin/answers/\\${id}\\`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n\n      if (response.ok) {\n        this.showAdmin();\n      } else {\n        const data = await response.json();\n        alert(this.t('error.generic', 'Hata') + ': ' + data.error);\n      }\n    } catch (error) {\n      alert(this.t('error.delete_answer', 'Cevap silinemedi') + ': ' + error.message);\n    }\n  }\n}\n\nconst app = new App();`;\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"/home/runner/workspace/src/index.js\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"/home/runner/workspace/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts\";\n\n\t\t\t\texport * from \"/home/runner/workspace/src/index.js\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"/home/runner/workspace/.wrangler/tmp/bundle-yx5MLA/middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"/home/runner/workspace/node_modules/wrangler/templates/middleware/common.ts\";\nimport type { WorkerEntrypointConstructor } from \"/home/runner/workspace/.wrangler/tmp/bundle-yx5MLA/middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"/home/runner/workspace/.wrangler/tmp/bundle-yx5MLA/middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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A;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+HZ,IAAM,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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",
  "names": []
}
